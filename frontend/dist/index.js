const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["Analytics.js","vendor.js","charts.js","Input.js","FormField.js","Analytics.css","Species.js","Species.css","Search.js","CollapsibleSection.js","api.js","Search.css","About.js","About.css","System.js","System.css","Settings.js","LoadingSpinner.js","Settings.css","Notifications.js","Detections.js","Detections.css","ErrorPage.js","ServerErrorPage.js","GenericErrorPage.js"])))=>i.map(i=>d[i]);
import{d as tt,p as Fe,a as F,s as A,b as et,u as pt,c as ye,f as ge,i as u,g as e,e as Ae,h as n,j as Ze,k as x,l as r,m as Ye,n as a,o as d,t as Y,q as le,r as Q,v as It,w as Te,x as Qe,y as Xe,z as ot,A as wt,B as de,C as $e,D as ft,E as it,F as lt,G as Rt,H as yt,I as Ot,J as kt,K as Bt,L as Ct,M as Ke,N as Vt}from"./vendor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&h(m)}).observe(document,{childList:!0,subtree:!0});function o(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(i){if(i.ep)return;i.ep=!0;const c=o(i);fetch(i.href,c)}})();const zt="modulepreload",Ht=function(s){return"/ui/assets/"+s},xt={},Je=function(t,o,h){let i=Promise.resolve();if(o&&o.length>0){let b=function(S){return Promise.all(S.map(g=>Promise.resolve(g).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),N=m?.nonce||m?.getAttribute("nonce");i=b(o.map(S=>{if(S=Ht(S),S in xt)return;xt[S]=!0;const g=S.endsWith(".css"),k=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${k}`))return;const B=document.createElement("link");if(B.rel=g?"stylesheet":zt,g||(B.as="script"),B.crossOrigin="",B.href=S,N&&B.setAttribute("nonce",N),document.head.appendChild(B),g)return new Promise((R,H)=>{B.addEventListener("load",R),B.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${S}`)))})}))}function c(m){const N=new Event("vite:preloadError",{cancelable:!0});if(N.payload=m,window.dispatchEvent(N),!N.defaultPrevented)throw m}return i.then(m=>{for(const N of m||[])N.status==="rejected"&&c(N.reason);return t().catch(c)})},Ut="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ut);function ce(...s){const t=[];for(const o of s){if(o==null||o===!1||o==="")continue;const h=typeof o;if(h==="string"||h==="number")t.push(String(o));else if(Array.isArray(o)){const i=ce(...o);i&&t.push(i)}else if(h==="object")for(const i in o)o[i]&&t.push(i)}return t.join(" ")}function Ft(s,t,o){s.key==="Escape"&&(a(t,""),e(o)?.blur())}var Zt=x('<span class="loading loading-spinner loading-sm"></span>'),qt=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg>'),Wt=x('<div role="search"><form class="relative w-full md:w-3/4 lg:w-4/5 xl:w-5/6 max-w-4xl mx-auto"><input type="text" name="search"/> <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:pr-3 pointer-events-none" aria-hidden="true"><!></div> <div class="absolute inset-y-0 left-0 hidden lg:flex items-center pl-3 pointer-events-none"><kbd class="kbd kbd-xs text-base-content/40">âŒ˜K</kbd></div></form></div>');function Gt(s,t){Fe(t,!0);let o=F(t,"className",3,""),h=F(t,"placeholder",3,"Search detections"),i=F(t,"value",3,""),c=F(t,"size",3,"sm"),m=F(t,"showOnPages",19,()=>["dashboard"]),N=F(t,"currentPage",3,"dashboard"),b=A(et(i())),S=null,g=A(!1),k=A(void 0);const B=Ae(()=>m().includes(N().toLowerCase())),R=Ae(()=>()=>{switch(c()){case"lg":return{input:"input-lg",icon:"w-6 h-6",padding:"pl-4 pr-12"};case"md":return{input:"input-md",icon:"w-5 h-5",padding:"pl-3 pr-10"};default:return{input:"input-sm sm:input-md",icon:"w-4 h-4 sm:w-6 sm:h-6",padding:"pl-3 sm:pl-4 pr-10 sm:pr-12"}}});function H(Z){const f=Z.target;if(a(b,f.value,!0),S&&globalThis.clearTimeout(S),!e(b).trim()){a(g,!1);return}a(g,!0),S=setTimeout(()=>{D()},200)}async function D(){if(!e(b).trim()){a(g,!1);return}t.onSearch&&t.onSearch(e(b)),a(g,!1),t.onNavigate&&t.onNavigate(`/search?query=${encodeURIComponent(e(b))}`)}function L(Z){Z.preventDefault(),S&&globalThis.clearTimeout(S),D()}function V(Z){(Z.metaKey||Z.ctrlKey)&&Z.key==="k"&&(Z.preventDefault(),e(k)?.focus())}pt(()=>{if(typeof globalThis.window<"u")return globalThis.window.addEventListener("keydown",V),()=>{globalThis.window.removeEventListener("keydown",V)}});var W=ye(),ee=ge(W);{var pe=Z=>{var f=Wt(),T=r(f),E=r(T);E.__input=H,E.__keydown=[Ft,b,k],Ye(E,J=>a(k,J),()=>e(k));var K=d(E,2),De=r(K);{var p=J=>{var ve=Zt();n(J,ve)},I=J=>{var ve=qt();Y(C=>Q(ve,0,C),[()=>le(e(R)().icon)]),n(J,ve)};u(De,J=>{e(g)?J(p):J(I,!1)})}Y((J,ve)=>{Q(f,1,J),It(E,e(b)),Te(E,"aria-label",h()),Te(E,"placeholder",h()),Q(E,1,ve,"svelte-wphbxf")},[()=>le(ce("flex-grow flex justify-center relative",o())),()=>le(ce("input rounded-full focus:outline-none w-full font-normal transition-all",e(R)().input,e(R)().padding,e(g)&&"opacity-75"))]),Qe("submit",T,L),n(Z,f)};u(ee,Z=>{e(B)&&Z(pe)})}n(s,W),Ze()}tt(["input","keydown"]);var Kt=(s,t)=>a(t,!e(t)),Jt=x('<div class="invisible group-hover:visible absolute left-1/2 transform -translate-x-1/2 -translate-y-full mt-2 px-2 py-1 bg-gray-900 text-gray-50 text-sm rounded whitespace-nowrap z-50" aria-hidden="true"> </div>'),Yt=x('<div class="px-4 py-2 text-sm text-base-content/60" role="menuitem">No audio sources available</div>'),Xt=(s,t,o,h)=>{a(t,o(),!0),a(h,!1)},Qt=x('<span class="text-xs text-base-content/50 shrink-0 ml-2" aria-hidden="true">(silent)</span>'),$t=(s,t,o,h)=>{t(o()),a(h,!1)},ea=Xe('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>'),ta=Xe('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd"></path></svg>'),aa=x('<div role="menuitem"><button class="flex-1 text-left flex items-center justify-between" role="menuitemradio"><span class="flex-1 whitespace-nowrap"> </span> <!></button> <button><!></button></div>'),ra=x('<div role="dialog" aria-modal="true" aria-label="Audio Source Selection" class="absolute p-1 right-0 mt-2 w-auto min-w-[12rem] max-w-[90vw] overflow-hidden rounded-md shadow-lg bg-base-100 ring-1 ring-black ring-opacity-5 z-50"><div class="py-1" role="menu" aria-orientation="vertical"><!></div></div>'),na=x('<div class="fixed bottom-4 right-4 bg-primary text-primary-content p-2 rounded shadow-lg z-50" role="status" aria-live="polite"> </div>'),ia=x('<div role="status"><button class="w-full h-full relative focus:outline-none group" aria-haspopup="true"><svg class="w-full h-full" viewBox="0 0 36 36" aria-hidden="true"><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#E5E7EB" stroke-width="3" stroke-dasharray="100, 100"></path><path d="M18 33.9155 a 15.9155 15.9155 0 0 1 0 -31.831 a 15.9155 15.9155 0 0 1 0 31.831" fill="none" stroke-width="3" stroke-linecap="round"></path></svg> <div class="absolute inset-0 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg></div> <div class="sr-only" aria-live="polite"> </div></button> <!> <!> <!> <div aria-live="polite" class="sr-only"><!></div></div>');function oa(s,t){Fe(t,!0);let o=F(t,"className",3,""),h=F(t,"securityEnabled",3,!1),i=F(t,"accessAllowed",3,!0),c=A(et({})),m=A(null),N=et({}),b=A(!1),S=A(!1),g=A(null),k=A(!1),B=A("");const R=.4,H=5e3,D=2e4;let L=null,V=null,W=null,ee={},pe=null,Z=0,f=1e3,T=!1,E=A(void 0),K=A(void 0);const De=Ae(()=>e(m)&&e(c)[e(m)]?e(c)[e(m)].clipping:!1),p=Ae(()=>e(m)&&N[e(m)]||0);function I(v){return e(c)[v]?e(c)[v].level>0?!1:ee[v]?Date.now()-ee[v]>H:(ee[v]=Date.now(),!1):!0}function J(v){return e(c)[v]?.name||v}function ve(){if(!L){C();try{L=new globalThis.EventSource("/api/v1/audio-level"),L.onmessage=v=>{try{const y=JSON.parse(v.data);if(y.type==="audio-level"&&y.levels){if(Z=0,f=1e3,a(c,y.levels,!0),Object.entries(e(c)).forEach(([_,G])=>{G.level===0?ee[_]||(ee[_]=Date.now()):delete ee[_]}),Object.keys(e(c)).forEach(_=>{_ in N||(N[_]=0)}),!e(m)||!(e(m)in e(c))){const _=Object.keys(e(c));_.length>0&&a(m,_[0],!0)}Object.entries(e(c)).forEach(([_,G])=>{const _e=N[_]||0;N[_]=R*G.level+(1-R)*_e})}}catch{}},L.onerror=()=>{C(),!T&&Z<10&&globalThis.setTimeout(()=>{Z++,f=Math.min(f*1.5,15e3),ve()},f)}}catch{globalThis.setTimeout(()=>ve(),5e3)}}}function C(){L&&(L.close(),L=null)}function X(v){a(B,v,!0),a(k,!0)}function ne(){a(k,!1)}function ue(){return V||(V=document.createElement("audio"),V.id="hls-audio-player",V.setAttribute("aria-hidden","true"),V.classList.add("sr-only"),V.setAttribute("preload","auto"),V.setAttribute("playsinline",""),V.addEventListener("playing",()=>{a(S,!0),ne(),re(e(g)||"")}),V.addEventListener("pause",()=>{a(S,!1)}),V.addEventListener("ended",()=>{a(S,!1)}),V.addEventListener("error",v=>{X("Playback error"),a(S,!1),w()}),document.body.appendChild(V)),V}function re(v){if("mediaSession"in navigator){const y=v?J(v):"";navigator.mediaSession.metadata=new globalThis.MediaMetadata({title:y?`Bird Audio Stream - ${y}`:"Bird Audio Stream",artist:"BirdNet-Go",album:"Live Stream"}),navigator.mediaSession.setActionHandler("play",()=>{V?.play()}),navigator.mediaSession.setActionHandler("pause",()=>{V?.pause()}),navigator.mediaSession.playbackState="playing"}}function be(){ie();const v=async()=>{if(!(!e(S)||!e(g)))try{(await fetch("/api/v1/audio-stream-hls/heartbeat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_id:e(g)})})).ok}catch{}};v(),pe=globalThis.setInterval(v,D)}function ie(){pe&&(globalThis.clearInterval(pe),pe=null),e(g)&&fetch("/api/v1/audio-stream-hls/heartbeat?disconnect=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source_id:e(g)})}).catch(()=>{})}async function ke(v,y){const _=ue();if(typeof window<"u"&&window.Hls&&window.Hls.isSupported()){const G=window.Hls;W&&(W.destroy(),W=null),W=new G({debug:!1,enableWorker:!0,lowLatencyMode:!1,backBufferLength:10,liveSyncDurationCount:5,liveMaxLatencyDurationCount:30}),W.on(G.Events.ERROR,(_e,we)=>{we.fatal&&(X("Playback error: "+we.details),w())}),W.on(G.Events.MANIFEST_PARSED,()=>{_.play().catch(_e=>{_e.name==="NotAllowedError"&&X("Click to play (autoplay blocked)")})}),W.attachMedia(_),W.loadSource(v)}else _.canPlayType("application/vnd.apple.mpegurl")?(_.src=v,_.play().catch(G=>{G.name==="NotAllowedError"&&X("Click to play (autoplay blocked)")})):X("HLS playback not supported in this browser")}async function oe(v){w(),a(g,v,!0),X("Starting audio stream...");const y=encodeURIComponent(v);try{const _=await fetch(`/api/v1/audio-stream-hls/${y}/start`,{method:"POST"});if(!_.ok)throw new Error(`Failed to start stream: ${_.status} ${_.statusText}`);const G=`/api/v1/audio-stream-hls/${y}/playlist.m3u8`;await ke(G,v),be()}catch{X("Error starting stream"),globalThis.setTimeout(()=>ne(),3e3)}}function w(){ne(),ie(),V&&(V.pause(),V.src="",V.load()),W&&(W.destroy(),W=null);const v=e(g);if(a(S,!1),a(g,null),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="paused"),v){const y=encodeURIComponent(v);fetch(`/api/v1/audio-stream-hls/${y}/stop`,{method:"POST"}).catch(_=>{})}}function O(v){e(S)&&e(g)===v?w():(e(S)&&w(),oe(v))}function l(v){if(!e(E)||!e(K))return;const y=v.target;!e(E).contains(y)&&!e(K).contains(y)&&a(b,!1)}ot(()=>{ve(),document.addEventListener("click",l);const v=()=>{document.hidden?C():ve()};document.addEventListener("visibilitychange",v);const y=()=>{e(S)&&e(g)&&ie()};return window.addEventListener("beforeunload",y),window.addEventListener("unload",y),()=>{document.removeEventListener("click",l),document.removeEventListener("visibilitychange",v),window.removeEventListener("beforeunload",y),window.removeEventListener("unload",y)}}),wt(()=>{C(),ie(),V&&(V.pause(),V.src="",V.remove(),V=null),W&&(W.destroy(),W=null)});var P=ia(),M=r(P);M.__click=[Kt,b];var j=r(M),te=d(r(j)),se=d(j,4),z=r(se);Ye(M,v=>a(K,v),()=>e(K));var U=d(M,2);{var ae=v=>{var y=Jt();$e(y,"",{},{top:"-5px"});var _=r(y);Y(G=>de(_,G),[()=>J(e(m))]),n(v,y)};u(U,v=>{e(m)&&!e(b)&&v(ae)})}var Ee=d(U,2);{var he=v=>{var y=ye(),_=ge(y);{var G=_e=>{var we=ra(),Ce=r(we),Me=r(Ce);{var He=Se=>{var Pe=Yt();n(Se,Pe)},Le=Se=>{var Pe=ye(),ze=ge(Pe);it(ze,17,()=>Object.entries(e(c)),lt,(Oe,Be)=>{var We=Ae(()=>Rt(e(Be),2));let je=()=>e(We)[0];var Ve=aa(),Ue=r(Ve);Ue.__click=[Xt,m,je,b];var at=r(Ue),rt=r(at),nt=d(at,2);{var vt=Re=>{var Ge=Qt();n(Re,Ge)};u(nt,Re=>{I(je())&&Re(vt)})}var Ie=d(Ue,2);Ie.__click=[$t,O,je,b];var qe=r(Ie);{var st=Re=>{var Ge=ea();n(Re,Ge)},ut=Re=>{var Ge=ta();n(Re,Ge)};u(qe,Re=>{e(g)!==je()?Re(st):Re(ut,!1)})}Y((Re,Ge,gt)=>{Q(Ve,1,Re),Te(Ue,"aria-checked",e(m)===je()),de(rt,Ge),Q(Ie,1,gt),Te(Ie,"aria-label",e(g)===je()?"Stop audio playback":"Start audio playback")},[()=>le(ce("flex flex-row items-center w-full p-2 text-sm hover:bg-base-200 rounded-md",e(m)===je()&&"bg-base-200",I(je())?"text-base-content/50":"text-base-content")),()=>J(je()),()=>le(ce("btn btn-xs btn-circle btn-ghost ml-2",e(g)===je()?"text-error":"text-success"))]),n(Oe,Ve)}),n(Se,Pe)};u(Me,Se=>{Object.keys(e(c)).length===0?Se(He):Se(Le,!1)})}Ye(we,Se=>a(E,Se),()=>e(E)),n(_e,we)};u(_,_e=>{e(b)&&_e(G)})}n(v,y)};u(Ee,v=>{(!h()||i())&&v(he)})}var $=d(Ee,2);{var me=v=>{var y=na(),_=r(y);Y(()=>de(_,e(B))),n(v,y)};u($,v=>{e(k)&&v(me)})}var Ne=d($,2),xe=r(Ne);{var fe=v=>{var y=ft();Y(_=>de(y,`Now playing audio from ${_??""}`),[()=>e(m)?J(e(m)):"unknown source"]),n(v,y)},q=(v,y)=>{{var _=G=>{var _e=ft("Audio playback stopped");n(G,_e)};u(v,G=>{!e(S)&&e(m)&&G(_)},y)}};u(xe,v=>{e(S)?v(fe):v(q,!1)})}Y((v,y,_)=>{Q(P,1,v),Te(M,"aria-expanded",e(b)),Te(M,"aria-label",y),Te(te,"stroke",e(De)?"#EF4444":"#10B981"),Te(te,"stroke-dasharray",`${e(p)}, 100`),de(z,`Current audio level: ${_??""} percent${e(De)?", clipping detected":""}`)},[()=>le(ce("relative w-10 h-10",o())),()=>`Audio level for ${e(m)?J(e(m)):"No source"}`,()=>Math.round(e(p))]),n(s,P),Ze()}tt(["click"]);async function sa(s,t,o){const h=e(t).filter(i=>!i.read).map(i=>i.id);await Promise.all(h.map(i=>o(i)))}var la=(s,t)=>a(t,!e(t)),ca=x('<span class="absolute -top-1 -right-1 bg-error text-error-content text-xs rounded-full px-1 min-w-[1.25rem] h-5 flex items-center justify-center font-bold svelte-x0a9kv" aria-live="polite" aria-atomic="true"> </span>'),da=x('<button class="text-sm link link-primary svelte-x0a9kv" aria-label="Mark all notifications as read">Mark all as read</button>'),va=x('<div class="p-8 text-center svelte-x0a9kv"><div class="loading loading-spinner loading-md svelte-x0a9kv" role="status"><span class="sr-only svelte-x0a9kv">Loading notifications...</span></div></div>'),ua=x('<div class="p-8 text-center text-base-content/60 svelte-x0a9kv"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mx-auto mb-2 opacity-50 svelte-x0a9kv" role="img" aria-label="No notifications"><path stroke-linecap="round" stroke-linejoin="round" d="M9.143 17.082a24.248 24.248 0 003.844.148m-3.844-.148a23.856 23.856 0 01-5.455-1.31 8.964 8.964 0 002.3-5.542m3.155 6.852a3 3 0 005.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 003.536-1.003A8.967 8.967 0 0118 9.75V9A6 6 0 006.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53" class="svelte-x0a9kv"></path></svg> <p class="svelte-x0a9kv">No notifications</p></div>'),fa=(s,t,o)=>t(e(o)),ga=(s,t,o)=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),t(e(o)))},ha=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 svelte-x0a9kv"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" class="svelte-x0a9kv"></path></svg>'),ma=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 svelte-x0a9kv"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" class="svelte-x0a9kv"></path></svg>'),_a=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 svelte-x0a9kv"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-x0a9kv"></path></svg>'),ba=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 svelte-x0a9kv"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" class="svelte-x0a9kv"></path></svg>'),pa=Xe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 svelte-x0a9kv"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" class="svelte-x0a9kv"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-x0a9kv"></path></svg>'),wa=x('<span class="badge badge-sm badge-ghost svelte-x0a9kv"> </span>'),ya=x('<div role="menuitem" tabindex="0"><div class="flex items-start gap-3 svelte-x0a9kv"><div class="flex-shrink-0 mt-1 svelte-x0a9kv"><div><!></div></div> <div class="flex-1 min-w-0 svelte-x0a9kv"><div class="flex items-start justify-between gap-2 svelte-x0a9kv"><h4 class="font-medium text-sm truncate svelte-x0a9kv"> </h4> <time class="text-xs text-base-content/60 whitespace-nowrap svelte-x0a9kv"> </time></div> <p class="text-sm text-base-content/80 mt-1 svelte-x0a9kv"> </p> <div class="flex items-center gap-2 mt-2 svelte-x0a9kv"><!> <span> </span></div></div></div></div>'),ka=(s,t,o)=>{a(t,!1),o.onNavigateToNotifications?o.onNavigateToNotifications():globalThis.window.location.href="/notifications"},xa=x('<div id="notification-dropdown" role="menu" class="absolute right-0 mt-2 w-80 md:w-96 max-h-[32rem] bg-base-100 rounded-lg shadow-xl z-50 overflow-hidden flex flex-col svelte-x0a9kv"><div class="flex items-center justify-between p-4 border-b border-base-300 svelte-x0a9kv"><h3 class="text-lg font-semibold svelte-x0a9kv">Notifications</h3> <!></div> <div class="overflow-y-auto flex-1 svelte-x0a9kv"><!></div> <div class="p-4 border-t border-base-300 svelte-x0a9kv"><button class="btn btn-sm btn-block btn-ghost svelte-x0a9kv">View all notifications</button></div></div>'),Sa=x('<div><button class="btn btn-ghost btn-sm p-1 relative svelte-x0a9kv" aria-label="Notifications" aria-haspopup="menu" aria-controls="notification-dropdown"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" class="svelte-x0a9kv"></path></svg> <!></button> <!></div>');function Ta(s,t){Fe(t,!0);let o=F(t,"className",3,""),h=F(t,"debugMode",3,!1),i=A(et([])),c=A(0),m=A(!1),N=A(!0),b=A(!1),S=A(!1),g=null,k=null,B=1e3,R=null,H=A(void 0),D=A(void 0);const L=3e4,V=Ae(()=>e(i).filter(l=>W(l)));function W(l){return l.type==="detection"||l.priority==="critical"||l.priority==="high"||h()?!0:!(l.type==="error"||l.type==="system"||l.type==="warning")}async function ee(){a(N,!0);try{const l=await fetch("/api/v2/notifications?limit=20&status=unread");if(l.ok){const P=await l.json();a(i,(P.notifications||[]).filter(M=>W(M)),!0),T()}}catch{}finally{a(N,!1)}}function pe(){g&&g.close(),g=new globalThis.EventSource("/api/v2/notifications/stream"),g.onopen=()=>{B=1e3},g.onmessage=l=>{try{const P=JSON.parse(l.data);Z(P)}catch{}},g.onerror=()=>{g?.readyState!==globalThis.EventSource.CLOSED&&g?.close(),!(!globalThis.window.navigator.onLine||globalThis.document.hidden)&&C()}}function Z(l){switch(l.eventType){case"connected":break;case"notification":f(l);break}}function f(l){W(l)&&(a(i,[l,...e(i).slice(0,19)],!0),T(),R&&globalThis.clearTimeout(R),a(b,!0),R=globalThis.setTimeout(()=>{a(b,!1),R=null},1e3),e(S)&&(l.priority==="critical"||l.priority==="high")&&De(),l.priority==="critical"&&p(l))}function T(){a(c,e(i).filter(l=>!l.read).length,!0)}async function E(l){try{const P=globalThis.document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"";(await fetch(`/api/v2/notifications/${l}/read`,{method:"PUT",headers:{"X-CSRF-Token":P}})).ok&&(a(i,e(i).map(j=>j.id===l?{...j,read:!0}:j),!0),T())}catch{}}async function K(l){l.read||E(l.id),a(m,!1),t.onNavigateToNotifications?t.onNavigateToNotifications():globalThis.window.location.href="/notifications"}function De(){const l=new globalThis.Audio("/assets/sounds/notification.mp3");l.volume=.5,l.play().catch(()=>{})}function p(l){"Notification"in globalThis.window&&globalThis.Notification.permission==="granted"&&new globalThis.Notification(l.title,{body:l.message,icon:"/assets/images/favicon-32x32.png",tag:l.id})}function I(l){const P="bg-opacity-20";switch(l.type){case"error":return`${P} bg-error text-error`;case"warning":return`${P} bg-warning text-warning`;case"info":return`${P} bg-info text-info`;case"detection":return`${P} bg-success text-success`;case"system":return`${P} bg-primary text-primary`;default:return`${P} bg-base-300 text-base-content`}}function J(l){switch(l){case"critical":return"badge-error";case"high":return"badge-warning";case"medium":return"badge-info";case"low":return"badge-ghost";default:return"badge-ghost"}}function ve(l){const P=new Date(l),j=Math.floor((new Date().getTime()-P.getTime())/1e3);return j<60?"just now":j<3600?`${Math.floor(j/60)}m ago`:j<86400?`${Math.floor(j/3600)}h ago`:j<604800?`${Math.floor(j/86400)}d ago`:P.toLocaleDateString()}function C(){k&&globalThis.clearTimeout(k),k=globalThis.setTimeout(()=>{pe(),B=Math.min(B*2,L)},B)}function X(l){e(i).findIndex(M=>M.id===l.detail.id)!==-1&&(a(i,e(i).filter(M=>M.id!==l.detail.id),!0),l.detail.wasUnread&&T())}function ne(l){if(!e(H)||!e(D))return;const P=l.target;!e(H).contains(P)&&!e(D).contains(P)&&a(m,!1)}function ue(){g&&g.close(),k&&globalThis.clearTimeout(k),R&&globalThis.clearTimeout(R)}ot(()=>{if(a(S,globalThis.localStorage.getItem("notificationSound")==="true"),ee(),pe(),globalThis.document.addEventListener("click",ne),globalThis.window.addEventListener("notification-deleted",X),"Notification"in globalThis.window&&globalThis.Notification.permission==="default"){const l=()=>{globalThis.Notification.requestPermission(),globalThis.document.removeEventListener("click",l)};globalThis.document.addEventListener("click",l,{once:!0})}return()=>{globalThis.document.removeEventListener("click",ne),globalThis.window.removeEventListener("notification-deleted",X)}}),wt(()=>{ue()});var re=Sa(),be=r(re);be.__click=[la,m];var ie=r(be),ke=d(ie,2);{var oe=l=>{var P=ca(),M=r(P);Y(()=>de(M,e(c)>99?"99+":e(c))),n(l,P)};u(ke,l=>{!e(N)&&e(c)>0&&l(oe)})}Ye(be,l=>a(D,l),()=>e(D));var w=d(be,2);{var O=l=>{var P=xa(),M=r(P),j=d(r(M),2);{var te=$=>{var me=da();me.__click=[sa,i,E],n($,me)};u(j,$=>{e(V).length>0&&$(te)})}var se=d(M,2),z=r(se);{var U=$=>{var me=va();n($,me)},ae=($,me)=>{{var Ne=fe=>{var q=ua();n(fe,q)},xe=fe=>{var q=ye(),v=ge(q);it(v,17,()=>e(V),y=>y.id,(y,_)=>{var G=ya();G.__click=[fa,K,_],G.__keydown=[ga,K,_];var _e=r(G),we=r(_e),Ce=r(we),Me=r(Ce);{var He=Ie=>{var qe=ha();n(Ie,qe)},Le=(Ie,qe)=>{{var st=Re=>{var Ge=ma();n(Re,Ge)},ut=(Re,Ge)=>{{var gt=ct=>{var ht=_a();n(ct,ht)},Nt=(ct,ht)=>{{var Mt=dt=>{var mt=ba();n(dt,mt)},Lt=(dt,mt)=>{{var Pt=_t=>{var jt=pa();n(_t,jt)};u(dt,_t=>{e(_).type==="system"&&_t(Pt)},mt)}};u(ct,dt=>{e(_).type==="detection"?dt(Mt):dt(Lt,!1)},ht)}};u(Re,ct=>{e(_).type==="info"?ct(gt):ct(Nt,!1)},Ge)}};u(Ie,Re=>{e(_).type==="warning"?Re(st):Re(ut,!1)},qe)}};u(Me,Ie=>{e(_).type==="error"?Ie(He):Ie(Le,!1)})}var Se=d(we,2),Pe=r(Se),ze=r(Pe),Oe=r(ze),Be=d(ze,2),We=r(Be),je=d(Pe,2),Ve=r(je),Ue=d(je,2),at=r(Ue);{var rt=Ie=>{var qe=wa(),st=r(qe);Y(()=>de(st,e(_).component)),n(Ie,qe)};u(at,Ie=>{e(_).component&&Ie(rt)})}var nt=d(at,2),vt=r(nt);Y((Ie,qe,st,ut)=>{Q(G,1,Ie,"svelte-x0a9kv"),Q(Ce,1,qe,"svelte-x0a9kv"),de(Oe,e(_).title),Te(Be,"datetime",e(_).timestamp),de(We,st),de(Ve,e(_).message),Q(nt,1,ut,"svelte-x0a9kv"),de(vt,e(_).priority)},[()=>le(ce("border-b border-base-300 p-4 hover:bg-base-200 transition-colors cursor-pointer",!e(_).read&&"bg-base-200/50")),()=>le(ce("w-8 h-8 rounded-full flex items-center justify-center",I(e(_)))),()=>ve(e(_).timestamp),()=>le(ce("badge badge-sm",J(e(_).priority)))]),n(y,G)}),n(fe,q)};u($,fe=>{e(V).length===0?fe(Ne):fe(xe,!1)},me)}};u(z,$=>{e(N)?$(U):$(ae,!1)})}var Ee=d(se,2),he=r(Ee);he.__click=[ka,m,t],Ye(P,$=>a(H,$),()=>e(H)),n(l,P)};u(w,l=>{e(m)&&l(O)})}Y((l,P)=>{Q(re,1,l,"svelte-x0a9kv"),Te(be,"aria-expanded",e(m)),Q(ie,0,P,"svelte-x0a9kv")},[()=>le(ce("relative",o())),()=>le(ce("w-6 h-6",e(b)&&"animate-wiggle"))]),n(s,re),Ze()}tt(["click","keydown"]);function Da(){const s=()=>{if(typeof window>"u")return"light";const b=localStorage.getItem("theme");return b==="dark"||b==="light"?b:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},{subscribe:t,set:o,update:h}=yt(s()),i=b=>{typeof window>"u"||(document.documentElement.setAttribute("data-theme",b),document.documentElement.setAttribute("data-theme-controller",b),localStorage.setItem("theme",b))},c=b=>{o(b),i(b)};return{subscribe:t,set:c,toggle:()=>{h(b=>{const S=b==="dark"?"light":"dark";return i(S),S})},initialize:()=>{const b=s();if(i(b),o(b),window.matchMedia){const S=window.matchMedia("(prefers-color-scheme: dark)"),g=k=>{if(!localStorage.getItem("theme")){const B=k.matches?"dark":"light";c(B)}};return S.addEventListener("change",g),()=>S.removeEventListener("change",g)}}}}const bt=Da();function Ea(){bt.toggle()}var Ca=x('<div class="invisible group-hover:visible absolute left-1/2 transform -translate-x-1/2 mt-2 w-auto whitespace-nowrap bg-gray-900 text-gray-50 text-sm rounded px-2 py-1 z-50 shadow-md" role="tooltip" aria-hidden="true">Switch theme</div>'),Aa=x('<div><label><input type="checkbox" class="theme-controller" aria-label="Toggle dark mode"/> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"></path></svg></label> <!></div>');function Na(s,t){Fe(t,!0);let o=F(t,"className",3,""),h=F(t,"showTooltip",3,!0),i=F(t,"size",3,"sm"),c=A("light"),m=A(!1);pt(()=>bt.subscribe(L=>{a(c,L,!0)})),ot(()=>{const D=bt.initialize();return a(m,!0),()=>{D&&D()}});const N=Ae(()=>()=>{switch(i()){case"lg":return"w-8 h-8";case"md":return"w-7 h-7";default:return"w-6 h-6"}});var b=Aa(),S=r(b),g=r(S);g.__change=[Ea];var k=d(g,2),B=d(k,2),R=d(S,2);{var H=D=>{var L=Ca();n(D,L)};u(R,D=>{h()&&e(m)&&D(H)})}Y((D,L,V,W)=>{Q(b,1,D,"svelte-1f6v4n3"),Q(S,1,L,"svelte-1f6v4n3"),Ot(g,e(c)==="dark"),Q(k,0,V,"svelte-1f6v4n3"),Q(B,0,W,"svelte-1f6v4n3")},[()=>le(ce("relative group",!h()&&"md:block",o())),()=>le(ce("swap swap-rotate btn btn-ghost p-1",`btn-${i()}`)),()=>le(ce("swap-on fill-current",e(N)())),()=>le(ce("swap-off fill-current",e(N)()))]),n(s,b),Ze()}tt(["change"]);function Ma(s,t){if(t.onSidebarToggle)t.onSidebarToggle();else{const o=document.getElementById("my-drawer");o&&(o.checked=!o.checked)}}var La=x('<button class="btn btn-ghost btn-sm p-0 sm:p-1 lg:hidden" aria-label="Toggle sidebar menu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg></button>'),Pa=x('<div class="flex-grow"></div>'),ja=x('<header><div class="flex items-center gap-2 sm:gap-4"><!> <h1 class="text-base sm:text-xl lg:text-2xl font-bold"> </h1></div> <!> <div class="flex items-center gap-2"><!> <!> <!></div></header>');function Ia(s,t){Fe(t,!0);let o=F(t,"title",3,"Dashboard"),h=F(t,"currentPage",3,"dashboard"),i=F(t,"showSidebarToggle",3,!0),c=F(t,"showSearch",3,!0),m=F(t,"showAudioLevel",3,!0),N=F(t,"showNotifications",3,!0),b=F(t,"showThemeToggle",3,!0),S=F(t,"debugMode",3,!1),g=F(t,"securityEnabled",3,!1),k=F(t,"accessAllowed",3,!0),B=F(t,"className",3,"");function R(C){t.onSearch&&t.onSearch(C)}function H(C){t.onNavigate?t.onNavigate(C):window.location.href=C}var D=ja(),L=r(D),V=r(L);{var W=C=>{var X=La();X.__click=[Ma,t],n(C,X)};u(V,C=>{i()&&C(W)})}var ee=d(V,2),pe=r(ee),Z=d(L,2);{var f=C=>{Gt(C,{get currentPage(){return h()},onSearch:R,onNavigate:H})},T=C=>{var X=Pa();n(C,X)};u(Z,C=>{c()?C(f):C(T,!1)})}var E=d(Z,2),K=r(E);{var De=C=>{oa(C,{get securityEnabled(){return g()},get accessAllowed(){return k()}})};u(K,C=>{m()&&C(De)})}var p=d(K,2);{var I=C=>{Ta(C,{get debugMode(){return S()},onNavigateToNotifications:()=>H("/notifications")})};u(p,C=>{N()&&C(I)})}var J=d(p,2);{var ve=C=>{Na(C,{className:"hidden md:block",showTooltip:!0})};u(J,C=>{b()&&C(ve)})}Y(C=>{Q(D,1,C,"svelte-14uoibm"),de(pe,o())},[()=>le(ce("col-span-12 flex items-center justify-between gap-2 p-1 sm:gap-4 sm:p-2 lg:p-4",B()))]),n(s,D),Ze()}tt(["click"]);function Ra(){const{subscribe:s,set:t,update:o}=yt({isLoggedIn:!1,security:{enabled:!1,accessAllowed:!0}});return{subscribe:s,init:(h,i=!0)=>{o(c=>({...c,security:{enabled:h,accessAllowed:i}}))},setLoggedIn:h=>{o(i=>({...i,isLoggedIn:h}))},setSecurity:(h,i)=>{o(c=>({...c,security:{enabled:h,accessAllowed:i}}))},logout:async()=>{try{const h=await fetch("/api/logout",{method:"POST",credentials:"include"});if(!h.ok)throw new Error(`Logout failed: ${h.statusText}`);t({isLoggedIn:!1,security:{enabled:!0,accessAllowed:!1}}),window.location.href="/login"}catch(h){throw console.error("Logout error:",h),h}},needsLogin:h=>h.security.enabled&&!h.security.accessAllowed&&!h.isLoggedIn}}const At=Ra();async function Oa(){await At.logout()}function Ba(){}var Va=(s,t)=>t("/"),za=(s,t)=>t("/"),Ha=(s,t)=>t("/analytics"),Ua=(s,t)=>t("/analytics/species"),Fa=(s,t)=>t("/search"),Za=(s,t)=>t("/about"),qa=(s,t)=>t("/system"),Wa=(s,t)=>t("/settings/main"),Ga=(s,t)=>t("/settings/audio"),Ka=(s,t)=>t("/settings/detectionfilters"),Ja=(s,t)=>t("/settings/integrations"),Ya=(s,t)=>t("/settings/security"),Xa=(s,t)=>t("/settings/species"),Qa=(s,t)=>t("/settings/support"),$a=x('<li role="none"><button role="menuitem" aria-label="System dashboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path d="M14 6H6v8h8V6z"></path><path fill-rule="evenodd" d="M9.25 3V1.75a.75.75 0 0 1 1.5 0V3h1.5v-.75a.75.75 0 0 1 1.5 0V3h.5A2.75 2.75 0 0 1 17 5.75v.5h1.25a.75.75 0 0 1 0 1.5H17v1.5h1.25a.75.75 0 0 1 0 1.5H17v1.5h1.25a.75.75 0 0 1 0 1.5H17v.5A2.75 2.75 0 0 1 14.25 17h-.5v1.25a.75.75 0 0 1-1.5 0V17h-1.5v1.25a.75.75 0 0 1-1.5 0V17h-1.5v1.25a.75.75 0 0 1-1.5 0V17h-.5A2.75 2.75 0 0 1 3 14.25v-.5H1.75a.75.75 0 0 1 0-1.5H3v-1.5H1.75a.75.75 0 0 1 0-1.5H3v-1.5H1.75a.75.75 0 0 1 0-1.5H3v-.5A2.75 2.75 0 0 1 5.75 3h.5V1.75a.75.75 0 0 1 1.5 0V3h1.5ZM4.5 5.75c0-.69.56-1.25 1.25-1.25h8.5c.69 0 1.25.56 1.25 1.25v8.5c0 .69-.56 1.25-1.25 1.25h-8.5c-.69 0-1.25-.56-1.25-1.25v-8.5Z" clip-rule="evenodd"></path></svg> <span>System</span></button></li> <li role="none"><details><summary class="flex items-center gap-2" role="menuitem" aria-haspopup="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path fill-rule="evenodd" d="M7.84 1.804A1 1 0 0 1 8.82 1h2.36a1 1 0 0 1 .98.804l.331 1.652a6.993 6.993 0 0 1 1.929 1.115l1.598-.54a1 1 0 0 1 1.186.447l1.18 2.044a1 1 0 0 1-.205 1.251l-1.267 1.113a7.047 7.047 0 0 1 0 2.228l1.267 1.113a1 1 0 0 1 .206 1.25l-1.18 2.045a1 1 0 0 1-1.187.447l-1.598-.54a6.993 6.993 0 0 1-1.929 1.115l-.33 1.652a1 1 0 0 1-.98.804H8.82a1 1 0 0 1-.98-.804l-.331-1.652a6.993 6.993 0 0 1-1.929-1.115l-1.598.54a1 1 0 0 1-1.186-.447l-1.18-2.044a1 1 0 0 1 .205-1.251l1.267-1.114a7.05 7.05 0 0 1 0-2.227L1.821 7.773a1 1 0 0 1-.206-1.25l1.18-2.045a1 1 0 0 1 1.187-.447l1.598.54A6.992 6.992 0 0 1 7.51 3.456l.33-1.652ZM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd"></path></svg> <span>Settings</span></summary> <ul role="menu" aria-label="Settings submenu"><li role="none"><button role="menuitem">Main</button></li> <li role="none"><button role="menuitem">Audio Capture</button></li> <li role="none"><button role="menuitem">Detection Filters</button></li> <li role="none"><button role="menuitem">Integrations</button></li> <li role="none"><button role="menuitem">Security</button></li> <li role="none"><button role="menuitem">Species</button></li> <li role="none"><button role="menuitem">Support</button></li></ul></details></li>',1),er=x('<div class="flex flex-col gap-2"><button class="btn btn-sm justify-center w-full" aria-label="Logout"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg> <span>Logout</span></button></div>'),tr=x('<button class="btn btn-sm justify-center w-full" aria-label="Open login modal"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg> <span>Login</span></button>'),ar=x('<aside aria-label="Main navigation"><label for="my-drawer" class="drawer-overlay" aria-label="Close sidebar"></label> <nav class="flex flex-col h-[100dvh] w-64 bg-base-100 absolute inset-y-0 sm:static sm:h-full overflow-y-auto p-4"><div class="flex-none p-4"><button class="flex items-center gap-2 font-black text-2xl" aria-label="BirdNET-Go Home">BirdNET-Go <img src="/assets/images/logo.png" alt="BirdNET-Go Logo" class="absolute h-10 w-10 right-5 mr-2"/></button></div> <div class="flex-1 overflow-y-auto px-4"><ul class="menu menu-md" role="menubar"><li role="none"><button role="menuitem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path fill-rule="evenodd" d="M9.293 2.293a1 1 0 0 1 1.414 0l7 7A1 1 0 0 1 17 11h-1v6a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6H3a1 1 0 0 1-.707-1.707l7-7Z" clip-rule="evenodd"></path></svg> <span>Dashboard</span></button></li> <li role="none"><details><summary class="flex items-center gap-2" role="menuitem" aria-haspopup="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path d="M12 9a1 1 0 0 1-1-1V3c0-.552.45-1.007.997-.93a7.004 7.004 0 0 1 5.933 5.933c.078.547-.378.997-.93.997h-5Z"></path><path d="M8.003 4.07C8.55 3.994 9 4.449 9 5v5a1 1 0 0 0 1 1h5c.552 0 1.008.45.93.997A7.001 7.001 0 0 1 2 11a7.002 7.002 0 0 1 6.003-6.93Z"></path></svg> <span>Analytics</span></summary> <ul role="menu" aria-label="Analytics submenu"><li role="none"><button role="menuitem">Overview</button></li> <li role="none"><button role="menuitem">Species</button></li></ul></details></li> <li role="none"><button role="menuitem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg> <span>Search</span></button></li> <li role="none"><button role="menuitem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5" aria-hidden="true"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg> <span>About</span></button></li> <!></ul></div> <div class="flex-none border-base-200"><div class="p-4 flex flex-col gap-4"><!> <div class="text-center text-xs text-base-content/60 text-gray-500" role="contentinfo"><span class="inline-flex items-center gap-1"> </span></div></div></div></nav></aside>');function rr(s,t){Fe(t,!0);let o=F(t,"securityEnabled",3,!1),h=F(t,"accessAllowed",3,!0),i=F(t,"version",3,"Development Build"),c=F(t,"currentRoute",3,"/ui/dashboard"),m=F(t,"className",3,"");function N(w){const O=w.startsWith("/ui/")?w:`/ui${w}`;return c().startsWith(O)}function b(w){const O=w.startsWith("/ui/")?w:`/ui${w==="/"?"/dashboard":w}`;return c()===O}let S=A(et(N("/analytics"))),g=A(et(N("/settings")));pt(()=>{a(S,N("/analytics"),!0),a(g,N("/settings"),!0)});function k(w){if(t.onNavigate)t.onNavigate(w);else{const O=w.startsWith("/ui/")?w:`/ui${w==="/"?"/dashboard":w}`;window.location.href=O}}var B=ar(),R=d(r(B),2),H=r(R),D=r(H);D.__click=[Va,k];var L=d(H,2),V=r(L),W=r(V),ee=r(W);ee.__click=[za,k];var pe=d(W,2),Z=r(pe),f=d(r(Z),2),T=r(f),E=r(T);E.__click=[Ha,k];var K=d(T,2),De=r(K);De.__click=[Ua,k];var p=d(pe,2),I=r(p);I.__click=[Fa,k];var J=d(p,2),ve=r(J);ve.__click=[Za,k];var C=d(J,2);{var X=w=>{var O=$a(),l=ge(O),P=r(l);P.__click=[qa,k];var M=d(l,2),j=r(M),te=d(r(j),2),se=r(te),z=r(se);z.__click=[Wa,k];var U=d(se,2),ae=r(U);ae.__click=[Ga,k];var Ee=d(U,2),he=r(Ee);he.__click=[Ka,k];var $=d(Ee,2),me=r($);me.__click=[Ja,k];var Ne=d($,2),xe=r(Ne);xe.__click=[Ya,k];var fe=d(Ne,2),q=r(fe);q.__click=[Xa,k];var v=d(fe,2),y=r(v);y.__click=[Qa,k],Y((_,G,_e,we,Ce,Me,He,Le,Se)=>{Q(P,1,_),Te(P,"aria-current",G),Q(z,1,_e),Q(ae,1,we),Q(he,1,Ce),Q(me,1,Me),Q(xe,1,He),Q(q,1,Le),Q(y,1,Se)},[()=>le(ce("flex items-center gap-2",{active:N("/system")})),()=>N("/system")?"page":void 0,()=>le(ce({active:b("/settings/main")})),()=>le(ce({active:b("/settings/audio")})),()=>le(ce({active:N("/settings/detectionfilters")})),()=>le(ce({active:b("/settings/integrations")})),()=>le(ce({active:b("/settings/security")})),()=>le(ce({active:b("/settings/species")})),()=>le(ce({active:b("/settings/support")}))]),kt("open","toggle",j,_=>a(g,_),()=>e(g)),n(w,O)};u(C,w=>{(!o()||h())&&w(X)})}var ne=d(L,2),ue=r(ne),re=r(ue);{var be=w=>{var O=ye(),l=ge(O);{var P=j=>{var te=er(),se=r(te);se.__click=[Oa],n(j,te)},M=j=>{var te=tr();te.__click=[Ba],n(j,te)};u(l,j=>{h()?j(P):j(M,!1)})}n(w,O)};u(re,w=>{o()&&w(be)})}var ie=d(re,2),ke=r(ie),oe=r(ke);Y((w,O,l,P,M,j)=>{Q(B,1,w),Q(ee,1,O),Q(E,1,l),Q(De,1,P),Q(I,1,M),Q(ve,1,j),de(oe,i())},[()=>le(ce("drawer-side z-10",m())),()=>le(ce("flex items-center gap-2",{active:b("/")})),()=>le(ce({active:b("/analytics")})),()=>le(ce({active:b("/analytics/species")})),()=>le(ce("flex items-center gap-2",{active:N("/search")})),()=>le(ce("flex items-center gap-2",{active:N("/about")}))]),kt("open","toggle",Z,w=>a(S,w),()=>e(S)),n(s,B),Ze()}tt(["click"]);function nr(){const{subscribe:s,set:t}=yt({token:null}),o=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??null,h=(i="csrf_token")=>{const c=document.cookie.split(";");for(const m of c){const[N,b]=m.trim().split("=");if(N===i)return decodeURIComponent(b)}return null};return{subscribe:s,init:()=>{let i=o();i??=h(),t({token:i})},getToken:()=>{let i=null;return s(c=>{i=c.token})(),i||(i=o()??h(),i&&t({token:i})),i},setToken:i=>{t({token:i})},getHeaders:()=>{let i=null;s(m=>{i=m.token})();const c={"Content-Type":"application/json"};return i&&(c["X-CSRF-Token"]=i),c}}}const ir=nr();var or=x('<div><input id="my-drawer" type="checkbox" class="drawer-toggle"/> <div class="drawer-content"><div class="grid grid-cols-12 grid-rows-[min-content] p-3 pt-0 lg:px-8 lg:pb-0"><!></div> <main><div id="mainContent" class="grid grid-cols-12 grid-rows-[min-content] gap-y-8 p-3 pt-0 lg:p-8 lg:pt-0"><!></div> <div id="status-message"></div></main></div> <!> <dialog id="loginModal" class="modal modal-bottom sm:modal-middle"></dialog></div>');function sr(s,t){Fe(t,!0);let o=F(t,"title",3,"Dashboard"),h=F(t,"currentPage",3,"dashboard"),i=F(t,"securityEnabled",3,!1),c=F(t,"accessAllowed",3,!0),m=F(t,"version",3,"Development Build"),N=F(t,"className",3,""),b=A(!1);ot(()=>{ir.init(),At.init(i(),c());const T=globalThis.localStorage.getItem("theme");T&&(document.documentElement.setAttribute("data-theme",T),document.documentElement.setAttribute("data-theme-controller",T)),window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&document.documentElement.dataset.httpsRedirect==="true"&&(window.location.href="https:"+window.location.href.substring(window.location.protocol.length))});function S(){a(b,!e(b))}function g(T){}function k(T){const E=T.startsWith("/ui/")?T:`/ui${T==="/"?"/dashboard":T}`;window.location.href=E}var B=or(),R=r(B),H=d(R,2),D=r(H),L=r(D);Ia(L,{get title(){return o()},get currentPage(){return h()},get securityEnabled(){return i()},get accessAllowed(){return c()},showSidebarToggle:!0,onSidebarToggle:S,onSearch:g,onNavigate:k});var V=d(D,2),W=r(V),ee=r(W);{var pe=T=>{var E=ye(),K=ge(E);Ct(K,()=>t.children),n(T,E)};u(ee,T=>{t.children&&T(pe)})}var Z=d(H,2);const f=Ae(()=>`/ui/${h()}`);rr(Z,{get securityEnabled(){return i()},get accessAllowed(){return c()},get version(){return m()},get currentRoute(){return e(f)},onNavigate:k}),Y(T=>Q(B,1,T),[()=>le(ce("drawer lg:drawer-open min-h-screen bg-base-200",N()))]),Bt(R,()=>e(b),T=>a(b,T)),n(s,B),Ze()}function lr(s,t){a(t,new Date(e(t).getFullYear(),e(t).getMonth()-1,1),!0)}function cr(s,t){a(t,new Date(e(t).getFullYear(),e(t).getMonth()+1,1),!0)}function dr(s,t,o,h){if(!e(t)){(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),o());return}s.key==="Escape"&&(s.preventDefault(),a(t,!1),e(h)?.focus())}var vr=x('<div class="text-center text-xs font-medium text-base-content/60 py-1"> </div>'),ur=(s,t,o)=>t(e(o)),fr=x('<div class="absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-primary rounded-full"></div>'),gr=x('<button type="button"> <!></button>'),hr=x('<div class="h-8 w-8"></div>'),mr=(s,t)=>t(new Date),_r=x('<div class="absolute z-50 mt-1 bg-base-100 border border-base-300 rounded-lg shadow-lg p-4 min-w-[280px]" role="dialog" aria-label="Date picker calendar"><div class="flex items-center justify-between mb-4"><button type="button" class="btn btn-ghost btn-sm btn-circle" aria-label="Previous month"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h3 class="text-sm font-semibold"> </h3> <button type="button" class="btn btn-ghost btn-sm btn-circle" aria-label="Next month"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="grid grid-cols-7 gap-1 mb-2"></div> <div class="grid grid-cols-7 gap-1"></div> <div class="mt-4 pt-4 border-t border-base-200"><button type="button" class="btn btn-primary btn-sm btn-block">Today</button></div></div>'),br=x('<div class="relative"><button type="button" aria-label="Select date" aria-haspopup="true"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span> </span></button> <!></div>');function pr(s,t){Fe(t,!0);let o=F(t,"maxDate",19,()=>new Date().toISOString().split("T")[0]),h=F(t,"className",3,""),i=F(t,"disabled",3,!1),c=F(t,"placeholder",3,"Select date"),m=A(!1),N=A(et(new Date(t.value||new Date().toISOString()))),b=A(void 0),S=A(void 0);const g=Ae(()=>t.value?new Date(t.value+"T00:00:00"):null),k=Ae(()=>()=>e(g)?e(g).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):c()),B=Ae(()=>e(N).toLocaleDateString("en-US",{month:"long",year:"numeric"})),R=Ae(()=>()=>{const p=e(N).getFullYear(),I=e(N).getMonth(),J=new Date(p,I,1),C=new Date(p,I+1,0).getDate(),X=J.getDay(),ne=[];for(let ue=0;ue<X;ue++)ne.push(null);for(let ue=1;ue<=C;ue++)ne.push(new Date(p,I,ue));return ne});function H(p){if(!p)return!1;const I=p.toISOString().split("T")[0];return!(t.minDate&&I<t.minDate||o()&&I>o())}function D(p){return!p||!e(g)?!1:p.toDateString()===e(g).toDateString()}function L(p){return p?p.toDateString()===new Date().toDateString():!1}function V(p){if(!p||!H(p))return;const I=p.toISOString().split("T")[0];t.onChange(I),a(m,!1)}function W(){i()||a(m,!e(m))}function ee(p){if(!e(m))return;const I=p.target;!e(b)?.contains(I)&&!e(S)?.contains(I)&&a(m,!1)}ot(()=>(document.addEventListener("click",ee),()=>{document.removeEventListener("click",ee)}));const pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var Z=br(),f=r(Z);f.__click=W,f.__keydown=[dr,m,W,S];var T=d(r(f),2),E=r(T);Ye(f,p=>a(S,p),()=>e(S));var K=d(f,2);{var De=p=>{var I=_r(),J=r(I),ve=r(J);ve.__click=[lr,N];var C=d(ve,2),X=r(C),ne=d(C,2);ne.__click=[cr,N];var ue=d(J,2);it(ue,21,()=>pe,lt,(ke,oe)=>{var w=vr(),O=r(w);Y(()=>de(O,e(oe))),n(ke,w)});var re=d(ue,2);it(re,21,()=>e(R)(),lt,(ke,oe)=>{var w=ye(),O=ge(w);{var l=M=>{var j=gr();j.__click=[ur,V,oe];var te=r(j),se=d(te);{var z=U=>{var ae=fr();n(U,ae)};u(se,U=>{L(e(oe))&&U(z)})}Y((U,ae,Ee,he)=>{Q(j,1,U),j.disabled=ae,Te(j,"aria-label",Ee),de(te,`${he??""} `)},[()=>le(ce("relative h-8 w-8 rounded text-sm transition-colors","hover:bg-base-200",D(e(oe))?"bg-primary text-primary-content font-semibold":"",L(e(oe))&&!D(e(oe))?"bg-base-200 font-semibold":"",H(e(oe))?"cursor-pointer":"text-base-content/30 cursor-not-allowed hover:bg-transparent")),()=>!H(e(oe)),()=>e(oe).toLocaleDateString(),()=>e(oe).getDate()]),n(M,j)},P=M=>{var j=hr();n(M,j)};u(O,M=>{e(oe)?M(l):M(P,!1)})}n(ke,w)});var be=d(re,2),ie=r(be);ie.__click=[mr,V],Ye(I,ke=>a(b,ke),()=>e(b)),Y(ke=>{de(X,e(B)),ie.disabled=ke},[()=>!H(new Date)]),n(p,I)};u(K,p=>{e(m)&&p(De)})}Y((p,I)=>{Q(f,1,p),f.disabled=i(),Te(f,"aria-expanded",e(m)),de(E,I)},[()=>le(ce("btn btn-sm","flex items-center gap-2","font-normal",i()?"btn-disabled":"",h())),()=>e(k)()]),n(s,Z),Ze()}tt(["click","keydown"]);var wr=x('<span class="species-ball bg-blue-500 text-white ml-2 svelte-12jqbnv"> </span>'),yr=x('<button class="btn btn-sm btn-primary">Today</button>'),kr=x('<div class="flex justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),xr=x('<div class="alert alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Sr=(s,t,o)=>t(e(o)),Tr=x('<button class="hover:text-blue-600 cursor-pointer"> </button>'),Dr=x('<th scope="col"><!></th>'),Er=(s,t,o,h)=>{t.onRowClick?t.onRowClick(e(o)):t.onDetectionView&&h(e(o))},Cr=x('<div class="flex items-center gap-2"><img class="w-8 h-8 rounded object-cover"/> <span class="text-sm"> </span></div>'),Ar=(s,t,o)=>{s.stopPropagation(),t(e(o))},Nr=x('<button class="w-full bg-base-300 dark:bg-base-300 rounded-full overflow-hidden relative h-6 hover:bg-base-200 transition-colors cursor-pointer"><div class="progress progress-primary bg-gray-400 dark:bg-gray-400 h-full"><span class="text-xs text-gray-100 dark:text-base-300 absolute right-1 top-1/2 transform -translate-y-1/2"> </span></div></button>'),Mr=(s,t,o,h)=>{s.stopPropagation(),t(e(o),e(h))},Lr=x('<button class="heatmap-cell cursor-pointer svelte-12jqbnv"><span class="text-xs"> </span></button>'),Pr=x('<div class="heatmap-cell svelte-12jqbnv"><span class="text-xs text-base-content/30">Â·</span></div>'),jr=x('<span class="text-sm"> </span>'),Ir=x("<td><!></td>"),Rr=x("<tr></tr>"),Or=x('<div class="text-center py-8 text-base-content/60">No species detected on this date</div>'),Br=x('<div class="overflow-x-auto"><table class="table table-zebra h-full"><thead class="sticky-header text-xs svelte-12jqbnv"><tr></tr></thead><tbody></tbody></table> <!></div>'),Vr=x('<section class="card col-span-12 bg-base-100 shadow-sm"><div class="card-body grow-0 p-2 sm:p-4 sm:pt-3"><div class="flex items-center justify-between mb-4"><span class="card-title grow text-base sm:text-xl">Daily Summary <!></span> <div class="flex items-center gap-2"><button class="btn btn-sm btn-ghost" aria-label="Previous day"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button class="btn btn-sm btn-ghost" aria-label="Next day"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button> <!></div></div> <!></div></section>');function zr(s,t){Fe(t,!0);let o=F(t,"data",19,()=>[]),h=F(t,"loading",3,!1),i=F(t,"error",3,null);const c=[{key:"common_name",header:"Species",sortable:!0,className:"font-medium"},{key:"count",header:"Count",sortable:!0,align:"center",className:"text-center"}];for(let p=0;p<24;p++)c.push({key:`hour_${p}`,header:p.toString().padStart(2,"0"),align:"center",className:"px-1 text-xs",render:I=>I.hourly_counts[p]||""});function m(p){const I=p.currentTarget;I.src="/assets/images/bird-placeholder.svg"}function N(p){t.onDetectionView&&t.onDetectionView({queryType:"species",species:p.common_name,date:t.selectedDate,numResults:100,offset:0})}function b(p,I){t.onDetectionView&&t.onDetectionView({queryType:"species",species:p.common_name,date:t.selectedDate,hour:I.toString(),duration:1,numResults:100,offset:0})}function S(p){t.onDetectionView&&t.onDetectionView({queryType:"species",species:p.common_name,date:t.selectedDate,numResults:100,offset:0})}function g(p){t.onDetectionView&&t.onDetectionView({queryType:"hourly",date:t.selectedDate,hour:p.toString(),duration:1,numResults:100,offset:0})}const k=Ae(()=>t.selectedDate===new Date().toISOString().split("T")[0]);var B=Vr(),R=r(B),H=r(R),D=r(H),L=d(r(D));{var V=p=>{var I=wr(),J=r(I);Y(()=>de(J,o().length)),n(p,I)};u(L,p=>{o().length>0&&p(V)})}var W=d(D,2),ee=r(W);ee.__click=function(...p){t.onPreviousDay?.apply(this,p)};var pe=d(ee,2);pr(pe,{get value(){return t.selectedDate},get onChange(){return t.onDateChange},className:"mx-2"});var Z=d(pe,2);Z.__click=function(...p){t.onNextDay?.apply(this,p)};var f=d(Z,2);{var T=p=>{var I=yr();I.__click=function(...J){t.onGoToToday?.apply(this,J)},n(p,I)};u(f,p=>{e(k)||p(T)})}var E=d(H,2);{var K=p=>{var I=kr();n(p,I)},De=(p,I)=>{{var J=C=>{var X=xr(),ne=d(r(X),2),ue=r(ne);Y(()=>de(ue,i())),n(C,X)},ve=C=>{var X=Br(),ne=r(X),ue=r(ne),re=r(ue);it(re,21,()=>c,lt,(oe,w)=>{var O=Dr();let l;var P=r(O);{var M=te=>{var se=Tr();const z=Ae(()=>parseInt(e(w).key.split("_")[1]));se.__click=[Sr,g,z];var U=r(se);Y(ae=>{Te(se,"title",`View all detections for ${ae??""}:00`),de(U,e(w).header)},[()=>e(z).toString().padStart(2,"0")]),n(te,se)},j=te=>{var se=ft();Y(()=>de(se,e(w).header)),n(te,se)};u(P,te=>{e(w).key?.startsWith("hour_")?te(M):te(j,!1)})}Y((te,se)=>{Q(O,1,`py-0 px-2 sm:px-4 ${(e(w).className||"")??""} ${te??""}`,"svelte-12jqbnv"),l=$e(O,"",l,se)},[()=>e(w).key?.startsWith("hour_")?"hour-header hourly-count":"",()=>({"text-align":e(w).align||"left"})]),n(oe,O)});var be=d(ue);it(be,21,o,lt,(oe,w)=>{var O=Rr();let l;O.__click=[Er,t,w,N],it(O,21,()=>c,lt,(P,M)=>{var j=Ir();let te;var se=r(j);{var z=ae=>{var Ee=Cr(),he=r(Ee),$=d(he,2),me=r($);Y(()=>{Te(he,"src",e(w).thumbnail_url),Te(he,"alt",e(w).common_name),de(me,e(w).common_name)}),Qe("error",he,m),n(ae,Ee)},U=(ae,Ee)=>{{var he=me=>{var Ne=Nr();Ne.__click=[Ar,S,w];var xe=r(Ne);let fe;var q=r(xe),v=r(q);Y(y=>{Te(Ne,"title",`View all detections for ${e(w).common_name??""}`),fe=$e(xe,"",fe,y),de(v,e(w).count)},[()=>({width:`${Math.min(100,e(w).count/Math.max(...o().map(y=>y.count))*100)}%`})]),n(me,Ne)},$=(me,Ne)=>{{var xe=q=>{var v=ye();const y=Ae(()=>parseInt(e(M).key.split("_")[1])),_=Ae(()=>e(w).hourly_counts[e(y)]);var G=ge(v);{var _e=Ce=>{var Me=Lr();const He=Ae(()=>Math.max(...e(w).hourly_counts.filter(Oe=>Oe>0))),Le=Ae(()=>Math.min(9,Math.floor(e(_)/e(He)*9)));Me.__click=[Mr,b,w,y];let Se;var Pe=r(Me),ze=r(Pe);Y((Oe,Be)=>{Te(Me,"title",`${e(_)??""} detections at ${Oe??""}:00 - Click to view`),Se=$e(Me,"",Se,Be),de(ze,e(_))},[()=>e(y).toString().padStart(2,"0"),()=>({"background-color":`var(--heatmap-color-${e(Le)??""})`})]),n(Ce,Me)},we=Ce=>{var Me=Pr();$e(Me,"",{},{"background-color":"var(--heatmap-color-0)"}),n(Ce,Me)};u(G,Ce=>{e(_)>0?Ce(_e):Ce(we,!1)})}n(q,v)},fe=(q,v)=>{{var y=G=>{var _e=ft();Y(we=>de(_e,we),[()=>e(M).render(e(w),0)]),n(G,_e)},_=G=>{var _e=jr(),we=r(_e);Y(()=>de(we,e(w)[e(M).key])),n(G,_e)};u(q,G=>{e(M).render?G(y):G(_,!1)},v)}};u(me,q=>{e(M).key?.startsWith("hour_")?q(xe):q(fe,!1)},Ne)}};u(ae,me=>{e(M).key==="count"?me(he):me($,!1)},Ee)}};u(se,ae=>{e(M).key==="common_name"?ae(z):ae(U,!1)})}Y((ae,Ee)=>{Q(j,1,`py-0 px-2 sm:px-4 ${(e(M).className||"")??""} ${ae??""}`,"svelte-12jqbnv"),te=$e(j,"",te,Ee)},[()=>e(M).key?.startsWith("hour_")?"hour-data hourly-count":"",()=>({"text-align":e(M).align||"left"})]),n(P,j)}),Y(P=>l=Q(O,1,"hover",null,l,P),[()=>({"cursor-pointer":t.onRowClick||t.onDetectionView})]),n(oe,O)});var ie=d(ne,2);{var ke=oe=>{var w=Or();n(oe,w)};u(ie,oe=>{o().length===0&&oe(ke)})}n(C,X)};u(p,C=>{i()?C(J):C(ve,!1)},I)}};u(E,p=>{h()?p(K):p(De,!1)})}Y(()=>Z.disabled=e(k)),n(s,B),Ze()}tt(["click"]);function St(s,t,o,h){if(!e(t)||!e(o))return;const i=s.currentTarget.getBoundingClientRect(),c=(s.clientX-i.left)/i.width;e(t).currentTime=c*e(o),h()}function Tt(s,t,o,h,i){if(!e(t)||!e(o))return;const c=5;switch(s.key){case"ArrowLeft":s.preventDefault(),e(t).currentTime=Math.max(0,e(t).currentTime-c),h();break;case"ArrowRight":s.preventDefault(),e(t).currentTime=Math.min(e(o),e(t).currentTime+c),h();break;case" ":case"Enter":s.preventDefault(),i();break}}var Hr=x('<div class="absolute inset-0 flex items-center justify-center bg-base-200"><span class="loading loading-spinner loading-md"></span></div>'),Ur=x('<div class="absolute inset-0 flex items-center justify-center bg-base-200"><div class="text-center"><svg class="mx-auto h-12 w-12 text-base-content/30" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <p class="mt-2 text-sm text-base-content/50">Failed to load audio</p></div></div>'),Fr=x('<img alt="Audio spectrogram" class="h-full w-full object-cover"/> <div class="absolute bottom-0 top-0 w-0.5 bg-primary pointer-events-none transition-all" aria-hidden="true"></div>',1),Zr=x('<div class="absolute inset-0 pointer-events-none"><!></div>'),qr=x('<div role="button" tabindex="0" aria-label="Seek in audio"><!> <!> <!></div>'),Wr=Xe('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),Gr=Xe('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),Kr=x('<a download="" class="btn btn-sm btn-circle btn-ghost" aria-label="Download audio file"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg></a>'),Jr=x('<div><audio class="hidden"></audio> <!> <div><button class="btn btn-sm btn-circle btn-ghost"><!></button> <div class="relative h-1.5 flex-1 cursor-pointer rounded-full bg-base-300" role="slider" tabindex="0" aria-label="Audio playback position" aria-valuemin="0"><div class="absolute left-0 top-0 h-full rounded-full bg-primary transition-all" aria-hidden="true"></div></div> <span class="text-xs font-medium tabular-nums"> </span> <!></div></div>');function Dt(s,t){Fe(t,!0);let o=F(t,"width",3,400),h=F(t,"height",3,200),i=F(t,"showDownload",3,!0),c=F(t,"showSpectrogram",3,!0),m=F(t,"autoPlay",3,!1),N=F(t,"className",3,""),b=F(t,"spectrogramClassName",3,""),S=F(t,"controlsClassName",3,""),g=A(void 0),k=A(void 0),B=A(void 0),R=A(void 0),H=A(!1),D=A(0),L=A(0),V=A(!0),W=A(!1),ee=null;const pe=Ae(()=>e(L)>0?e(D)/e(L)*100:0),Z=z=>{const U=Math.floor(z/60),ae=Math.floor(z%60);return`${U}:${ae.toString().padStart(2,"0")}`},f=Ae(()=>Z(e(D))),T=Ae(()=>Z(e(L)));function E(){e(g)&&(e(g).paused?e(g).play().catch(z=>{a(W,!0)}):e(g).pause())}function K(){e(g)&&(a(D,e(g).currentTime,!0),a(L,e(g).duration||0,!0),t.onTimeUpdate&&t.onTimeUpdate(e(D),e(L)))}function De(){a(H,!0),ee=window.setInterval(K,100),t.onPlay?.()}function p(){a(H,!1),ee&&(window.clearInterval(ee),ee=null),t.onPause?.()}function I(){a(H,!1),ee&&(window.clearInterval(ee),ee=null),a(D,0),t.onEnded?.()}function J(){a(V,!1),a(L,e(g)?.duration||0,!0),K()}function ve(){a(V,!1),a(W,!0)}ot(()=>{e(g)&&m()&&e(g).play().catch(z=>{})}),wt(()=>{ee&&window.clearInterval(ee)});const C=Ae(()=>t.spectrogramUrl??(t.detectionId?`/api/v2/spectrogram/${t.detectionId}?width=${o()}`:""));var X=Jr(),ne=r(X);Ye(ne,z=>a(g,z),()=>e(g));var ue=d(ne,2);{var re=z=>{var U=qr();U.__click=[St,g,L,K],U.__keydown=[Tt,g,L,K,E];let ae;var Ee=r(U);{var he=q=>{var v=Hr();n(q,v)};u(Ee,q=>{e(V)&&q(he)})}var $=d(Ee,2);{var me=q=>{var v=Ur();n(q,v)},Ne=q=>{var v=Fr(),y=ge(v),_=d(y,2);let G;Ye(_,_e=>a(R,_e),()=>e(R)),Y(_e=>{Te(y,"src",e(C)),G=$e(_,"",G,_e)},[()=>({left:`${e(pe)??""}%`,opacity:e(D)>0&&e(D)<e(L)?.7:0})]),Qe("error",y,()=>a(W,!0)),n(q,v)};u($,q=>{e(W)?q(me):q(Ne,!1)})}var xe=d($,2);{var fe=q=>{var v=Zr(),y=r(v);Ct(y,()=>t.children),n(q,v)};u(xe,q=>{t.children&&q(fe)})}Ye(U,q=>a(k,q),()=>e(k)),Y((q,v)=>{Q(U,1,q),ae=$e(U,"",ae,v)},[()=>le(ce("relative cursor-pointer overflow-hidden rounded",b())),()=>({width:`${o()??""}px`,height:`${h()??""}px`})]),n(z,U)};u(ue,z=>{c()&&e(C)&&z(re)})}var be=d(ue,2),ie=r(be);ie.__click=E;var ke=r(ie);{var oe=z=>{var U=Wr();n(z,U)},w=z=>{var U=Gr();n(z,U)};u(ke,z=>{e(H)?z(oe):z(w,!1)})}var O=d(ie,2);O.__click=[St,g,L,K],O.__keydown=[Tt,g,L,K,E];var l=r(O);let P;Ye(O,z=>a(B,z),()=>e(B));var M=d(O,2),j=r(M),te=d(M,2);{var se=z=>{var U=Kr();Y(()=>Te(U,"href",t.audioUrl)),n(z,U)};u(te,z=>{i()&&z(se)})}Y((z,U,ae)=>{Q(X,1,z),Te(ne,"src",t.audioUrl),Q(be,1,U),ie.disabled=e(W),Te(ie,"aria-label",e(H)?"Pause":"Play"),Te(ie,"aria-pressed",e(H)),Te(O,"aria-valuemax",e(L)),Te(O,"aria-valuenow",e(D)),Te(O,"aria-valuetext",e(f)),P=$e(l,"",P,ae),de(j,`${e(f)??""} / ${e(T)??""}`)},[()=>le(ce("audio-player",N())),()=>le(ce("flex items-center gap-2 rounded bg-base-200 p-2",c()&&e(C)?"-mt-1 rounded-t-none":"",S())),()=>({width:`${e(pe)??""}%`})]),Qe("play",ne,De),Qe("pause",ne,p),Qe("ended",ne,I),Qe("loadedmetadata",ne,J),Qe("error",ne,ve),n(s,X),Ze()}tt(["click","keydown"]);var Yr=Xe('<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>'),Xr=x('<div><div class="confidence-circle-track"></div> <div class="confidence-circle-progress"></div> <div class="confidence-circle-text"><!></div></div>');function Et(s,t){let o=F(t,"className",3,"");const h=Ae(()=>t.confidence<=1?Math.round(t.confidence*100):Math.round(t.confidence)),i=Ae(()=>e(h)===100);function c(k){const B=k<=1?k*100:k;return B>=70?"confidence-high":B>=40?"confidence-medium":"confidence-low"}var m=Xr(),N=d(r(m),4),b=r(N);{var S=k=>{var B=Yr();n(k,B)},g=k=>{var B=ft();Y(()=>de(B,`${e(h)??""}%`)),n(k,B)};u(b,k=>{e(i)?k(S):k(g,!1)})}Y(k=>{Q(m,1,`confidence-circle ${k??""} ${o()??""}`),$e(m,`--progress: ${e(h)??""}%`)},[()=>c(t.confidence)]),n(s,m)}var Qr=x('<div class="flex justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),$r=x('<div class="alert alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),en=(s,t,o)=>t(e(o)),tn=(s,t,o)=>s.key==="Enter"||s.key===" "?t(e(o)):null,an=x("<span> </span>"),rn=(s,t,o)=>t(e(o),s),nn=x('<div role="button" tabindex="0"><div class="col-span-2 text-sm"><div class="text-xs"> </div></div> <div class="col-span-2 text-sm font-medium"> <div class="text-xs text-base-content/60"> </div></div> <div class="col-span-1"><!></div> <div class="col-span-2"><div class="thumbnail-container svelte-bc4n83"><img class="w-12 h-12 rounded object-cover"/></div></div> <div class="col-span-2"><!></div> <div class="col-span-2"><div class="flex items-center gap-2"><!> <button class="btn btn-xs btn-ghost" title="View spectrogram" aria-label="View spectrogram"><svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></button></div></div></div>'),on=x('<div class="text-center py-8 text-base-content/60">No recent detections</div>'),sn=x('<div><div class="grid grid-cols-12 gap-2 text-xs font-medium text-base-content/70 pb-2 border-b border-base-300 svelte-bc4n83"><div class="col-span-2">Date & Time</div> <div class="col-span-2">Common Name</div> <div class="col-span-1">Confidence</div> <div class="col-span-2">Thumbnail</div> <div class="col-span-2">Status</div> <div class="col-span-2">Recording</div></div> <div class="divide-y divide-base-200"></div></div> <!>',1),ln=(s,t)=>s.key==="Escape"?t():null,cn=x('<div class="modal modal-open"><div class="modal-box w-11/12 max-w-2xl"><div class="flex items-center justify-between mb-4"><h3 class="font-bold text-lg">Audio Recording</h3> <button class="btn btn-sm btn-circle btn-ghost" aria-label="Close audio player modal"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 p-3 bg-base-200 rounded"><div class="flex items-center gap-3"><img class="w-12 h-12 rounded object-cover"/> <div><div class="font-medium"> </div> <div class="text-sm text-base-content/60"> </div> <div class="text-xs text-base-content/50"> </div></div> <div class="ml-auto"><!></div></div></div> <!></div> <div class="modal-backdrop" role="button" tabindex="0" aria-label="Close modal"></div></div>'),dn=x('<section class="card col-span-12 bg-base-100 shadow-sm"><div class="card-body grow-0 p-2 sm:p-4 sm:pt-3"><div class="flex items-center justify-between mb-4"><span class="card-title grow text-base sm:text-xl">Recent Detections</span> <button class="btn btn-sm btn-ghost" aria-label="Refresh detections"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button></div> <!></div></section> <!>',1);function vn(s,t){Fe(t,!0);let o=F(t,"data",19,()=>[]),h=F(t,"loading",3,!1),i=F(t,"error",3,null),c=A(null),m=A(!1);function N(E,K){K&&K.stopPropagation(),a(c,E,!0),a(m,!0)}function b(){a(m,!1),a(c,null)}function S(E){t.onRowClick&&t.onRowClick(E)}function g(E,K){if(K)return{type:"locked",text:"Locked",class:"status-badge-locked"};switch(E){case"correct":return{type:"correct",text:"Verified",class:"status-badge-correct"};case"false_positive":return{type:"false",text:"False",class:"status-badge-false"};default:return{type:"unverified",text:"Unverified",class:"status-badge-unverified"}}}function k(E){const K=E.currentTarget;K.src="/assets/images/bird-placeholder.svg"}var B=dn(),R=ge(B),H=r(R),D=r(H),L=d(r(D),2);L.__click=function(...E){t.onRefresh?.apply(this,E)};var V=r(L);let W;var ee=d(D,2);{var pe=E=>{var K=Qr();n(E,K)},Z=(E,K)=>{{var De=I=>{var J=$r(),ve=d(r(J),2),C=r(ve);Y(()=>de(C,i())),n(I,J)},p=I=>{var J=sn(),ve=ge(J),C=d(r(ve),2);it(C,21,o,lt,(ue,re)=>{var be=nn();let ie;be.__click=[en,S,re],be.__keydown=[tn,S,re];var ke=r(be),oe=r(ke),w=r(oe),O=d(ke,2),l=r(O),P=d(l),M=r(P),j=d(O,2),te=r(j);Et(te,{get confidence(){return e(re).confidence},size:"sm"});var se=d(j,2),z=r(se),U=r(z),ae=d(se,2),Ee=r(ae);{var he=q=>{var v=an();const y=Ae(()=>g(e(re).verified,e(re).locked));var _=r(v);Y(()=>{Q(v,1,`status-badge ${e(y).class??""}`,"svelte-bc4n83"),de(_,e(y).text)}),n(q,v)};u(Ee,q=>{q(he)})}var $=d(ae,2),me=r($),Ne=r(me);const xe=Ae(()=>e(re).id.toString());Dt(Ne,{get audioUrl(){return`/api/v2/audio/${e(re).id??""}`},get detectionId(){return e(xe)},width:140,height:50,showSpectrogram:!1,className:"flex-1 max-w-[140px]",controlsClassName:"bg-base-100 border border-base-300 text-xs p-1"});var fe=d(Ne,2);fe.__click=[rn,N,re],Y(q=>{ie=Q(be,1,"grid grid-cols-12 gap-2 py-3 hover:bg-base-50 dark:hover:bg-base-200/50 transition-colors svelte-bc4n83",null,ie,q),de(w,`${e(re).date??""} ${e(re).time??""}`),de(l,`${e(re).commonName??""} `),de(M,e(re).scientificName),Te(U,"src",`/api/v2/species/${e(re).speciesCode??""}/thumbnail`),Te(U,"alt",e(re).commonName)},[()=>({"cursor-pointer":t.onRowClick})]),Qe("error",U,k),n(ue,be)});var X=d(ve,2);{var ne=ue=>{var re=on();n(ue,re)};u(X,ue=>{o().length===0&&ue(ne)})}n(I,J)};u(E,I=>{i()?I(De):I(p,!1)},K)}};u(ee,E=>{h()?E(pe):E(Z,!1)})}var f=d(R,2);{var T=E=>{var K=cn(),De=r(K),p=r(De),I=d(r(p),2);I.__click=b;var J=d(p,2),ve=r(J),C=r(ve),X=d(C,2),ne=r(X),ue=r(ne),re=d(ne,2),be=r(re),ie=d(re,2),ke=r(ie),oe=d(X,2),w=r(oe);Et(w,{get confidence(){return e(c).confidence}});var O=d(J,2);const l=Ae(()=>e(c).id.toString());Dt(O,{get audioUrl(){return`/api/v2/audio/${e(c).id??""}`},get detectionId(){return e(l)},width:400,height:200,showSpectrogram:!0,showDownload:!0,className:"w-full"});var P=d(De,2);P.__click=b,P.__keydown=[ln,b],Y(()=>{Te(C,"src",`/api/v2/species/${e(c).speciesCode??""}/thumbnail`),Te(C,"alt",e(c).commonName),de(ue,e(c).commonName),de(be,e(c).scientificName),de(ke,`${e(c).date??""} at ${e(c).time??""}`)}),Qe("error",C,k),n(E,K)};u(f,E=>{e(m)&&e(c)&&E(T)})}Y(E=>{L.disabled=h(),W=Q(V,0,"h-4 w-4",null,W,E)},[()=>({"animate-spin":h()})]),n(s,B),Ze()}tt(["click","keydown"]);var un=x('<div class="col-span-12 space-y-6"><!> <!></div>');function fn(s,t){Fe(t,!0);let o=A(et([])),h=A(et([])),i=A(et(new Date().toISOString().split("T")[0])),c=A(!0),m=A(!0),N=A(null),b=A(null);async function S(){a(c,!0),a(N,null);try{const f=await fetch(`/api/v2/analytics/species/daily?date=${e(i)}`);if(!f.ok)throw new Error(`Failed to fetch daily summary: ${f.statusText}`);a(o,await f.json(),!0)}catch(f){a(N,f instanceof Error?f.message:"Failed to load daily summary",!0),console.error("Error fetching daily summary:",f)}finally{a(c,!1)}}async function g(){a(m,!0),a(b,null);try{const f=await fetch("/api/v2/detections/recent?limit=10");if(!f.ok)throw new Error(`Failed to fetch recent detections: ${f.statusText}`);a(h,await f.json(),!0)}catch(f){a(b,f instanceof Error?f.message:"Failed to load recent detections",!0),console.error("Error fetching recent detections:",f)}finally{a(m,!1)}}let k;ot(()=>(S(),g(),k=setInterval(()=>{g()},3e4),()=>{k&&clearInterval(k)}));function B(){const f=new Date(e(i));f.setDate(f.getDate()-1),a(i,f.toISOString().split("T")[0],!0),S()}function R(){const f=new Date(e(i));f.setDate(f.getDate()+1);const T=new Date().toISOString().split("T")[0];f.toISOString().split("T")[0]<=T&&(a(i,f.toISOString().split("T")[0],!0),S())}function H(){a(i,new Date().toISOString().split("T")[0],!0),S()}function D(f){a(i,f,!0),S()}function L(f){console.log("Detection clicked:",f)}function V(f){window.location.href=`/ui/species/${f.species_code}`}function W(f){const T=new URLSearchParams;Object.entries(f).forEach(([K,De])=>{De!=null&&De!==""&&T.append(K,String(De))});const E=T.toString();window.location.href=`/ui/detections${E?`?${E}`:""}`}var ee=un(),pe=r(ee);zr(pe,{get data(){return e(o)},get loading(){return e(c)},get error(){return e(N)},get selectedDate(){return e(i)},onRowClick:V,onDetectionView:W,onPreviousDay:B,onNextDay:R,onGoToToday:H,onDateChange:D});var Z=d(pe,2);vn(Z,{get data(){return e(h)},get loading(){return e(m)},get error(){return e(b)},onRowClick:L,onRefresh:g}),n(s,ee),Ze()}var gn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),hn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),mn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),_n=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),bn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),pn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),wn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),yn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),kn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),xn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>'),Sn=x('<div class="flex items-center justify-center h-64"><span class="loading loading-spinner loading-lg"></span></div>');function Tn(s,t){Fe(t,!0);let o=A(null),h=A(null),i=A(null),c=A(null),m=A(null),N=A(null),b=A(null),S=A(null),g=A(null),k=A(null),B=A(null),R=A(""),H=A(""),D=A("Dashboard"),L=A(!1),V=A(null),W=A(!1),ee=A(!0),pe=A("Development Build");async function Z(f){if(!e(L)){a(L,!0);try{switch(f){case"analytics":if(!e(o)){const T=await Je(()=>import("./Analytics.js"),__vite__mapDeps([0,1,2,3,4,5]));a(o,T.default,!0)}break;case"species":if(!e(h)){const T=await Je(()=>import("./Species.js"),__vite__mapDeps([6,1,3,4,7]));a(h,T.default,!0)}break;case"search":if(!e(i)){const T=await Je(()=>import("./Search.js"),__vite__mapDeps([8,1,9,10,11]));a(i,T.default,!0)}break;case"about":if(!e(c)){const T=await Je(()=>import("./About.js"),__vite__mapDeps([12,1,9,13]));a(c,T.default,!0)}break;case"system":if(!e(m)){const T=await Je(()=>import("./System.js"),__vite__mapDeps([14,1,15]));a(m,T.default,!0)}break;case"settings":if(!e(N)){const T=await Je(()=>import("./Settings.js"),__vite__mapDeps([16,1,10,4,17,18]));a(N,T.default,!0)}break;case"notifications":if(!e(b)){const T=await Je(()=>import("./Notifications.js"),__vite__mapDeps([19,1]));a(b,T.default,!0)}break;case"detections":if(!e(S)){const T=await Je(()=>import("./Detections.js"),__vite__mapDeps([20,1,10,17,21]));a(S,T.default,!0)}break;case"error-404":if(!e(g)){const T=await Je(()=>import("./ErrorPage.js"),__vite__mapDeps([22,1]));a(g,T.default,!0)}break;case"error-500":if(!e(k)){const T=await Je(()=>import("./ServerErrorPage.js"),__vite__mapDeps([23,1]));a(k,T.default,!0)}break;case"error-generic":if(!e(B)){const T=await Je(()=>import("./GenericErrorPage.js"),__vite__mapDeps([24,1]));a(B,T.default,!0)}break}}finally{a(L,!1)}}}ot(()=>{a(V,window.BIRDNET_CONFIG||{},!0),a(W,e(V).security?.enabled||!1,!0),a(ee,e(V).security?.accessAllowed||!0,!0),a(pe,e(V).version||"Development Build",!0);const f=window.location.pathname;if(f==="/ui/"||f==="/ui"||f==="/ui/dashboard")a(R,"dashboard"),a(H,"dashboard"),a(D,"Dashboard");else if(f==="/ui/notifications")a(R,"notifications"),a(H,"notifications"),a(D,"Notifications"),Z("notifications");else if(f==="/ui/analytics/species")a(R,"species"),a(H,"analytics/species"),a(D,"Species Analytics"),Z("species");else if(f==="/ui/analytics")a(R,"analytics"),a(H,"analytics"),a(D,"Analytics"),Z("analytics");else if(f==="/ui/search")a(R,"search"),a(H,"search"),a(D,"Search"),Z("search");else if(f==="/ui/detections")a(R,"detections"),a(H,"detections"),a(D,"Detections"),Z("detections");else if(f==="/ui/about")a(R,"about"),a(H,"about"),a(D,"About"),Z("about");else if(f==="/ui/system")a(R,"system"),a(H,"system"),a(D,"System"),Z("system");else if(f==="/ui/settings"||f.startsWith("/ui/settings/"))a(R,"settings"),a(H,"settings"),a(D,"Settings"),Z("settings"),f.includes("/main")?a(D,"Main Settings"):f.includes("/audio")?a(D,"Audio Settings"):f.includes("/detectionfilters")?a(D,"Detection Filters"):f.includes("/integrations")?a(D,"Integrations"):f.includes("/security")?a(D,"Security Settings"):f.includes("/species")?a(D,"Species Settings"):f.includes("/support")&&a(D,"Support");else{const T=new URLSearchParams(window.location.search),E=T.get("error"),K=T.get("title");E==="404"?(a(R,"error-404"),a(H,"error-404"),a(D,"Page Not Found"),Z("error-404")):E==="500"?(a(R,"error-500"),a(H,"error-500"),a(D,"Internal Server Error"),Z("error-500")):E?(a(R,"error-generic"),a(H,"error-generic"),a(D,K||"Error",!0),Z("error-generic")):(a(R,"error-404"),a(H,"error-404"),a(D,"Page Not Found"),Z("error-404"))}}),sr(s,{get title(){return e(D)},get currentPage(){return e(H)},get securityEnabled(){return e(W)},get accessAllowed(){return e(ee)},get version(){return e(pe)},children:(f,T)=>{var E=ye(),K=ge(E);{var De=I=>{fn(I,{})},p=(I,J)=>{{var ve=X=>{var ne=ye(),ue=ge(ne);{var re=ie=>{var ke=gn();n(ie,ke)},be=(ie,ke)=>{{var oe=w=>{var O=ye(),l=ge(O);Ke(l,()=>e(b),(P,M)=>{M(P,{})}),n(w,O)};u(ie,w=>{e(b)&&w(oe)},ke)}};u(ue,ie=>{e(L)?ie(re):ie(be,!1)})}n(X,ne)},C=(X,ne)=>{{var ue=be=>{var ie=ye(),ke=ge(ie);{var oe=O=>{var l=hn();n(O,l)},w=(O,l)=>{{var P=M=>{var j=ye(),te=ge(j);Ke(te,()=>e(o),(se,z)=>{z(se,{})}),n(M,j)};u(O,M=>{e(o)&&M(P)},l)}};u(ke,O=>{e(L)?O(oe):O(w,!1)})}n(be,ie)},re=(be,ie)=>{{var ke=w=>{var O=ye(),l=ge(O);{var P=j=>{var te=mn();n(j,te)},M=(j,te)=>{{var se=z=>{var U=ye(),ae=ge(U);Ke(ae,()=>e(h),(Ee,he)=>{he(Ee,{})}),n(z,U)};u(j,z=>{e(h)&&z(se)},te)}};u(l,j=>{e(L)?j(P):j(M,!1)})}n(w,O)},oe=(w,O)=>{{var l=M=>{var j=ye(),te=ge(j);{var se=U=>{var ae=_n();n(U,ae)},z=(U,ae)=>{{var Ee=he=>{var $=ye(),me=ge($);Ke(me,()=>e(i),(Ne,xe)=>{xe(Ne,{})}),n(he,$)};u(U,he=>{e(i)&&he(Ee)},ae)}};u(te,U=>{e(L)?U(se):U(z,!1)})}n(M,j)},P=(M,j)=>{{var te=z=>{var U=ye(),ae=ge(U);{var Ee=$=>{var me=bn();n($,me)},he=($,me)=>{{var Ne=xe=>{var fe=ye(),q=ge(fe);Ke(q,()=>e(c),(v,y)=>{y(v,{})}),n(xe,fe)};u($,xe=>{e(c)&&xe(Ne)},me)}};u(ae,$=>{e(L)?$(Ee):$(he,!1)})}n(z,U)},se=(z,U)=>{{var ae=he=>{var $=ye(),me=ge($);{var Ne=fe=>{var q=pn();n(fe,q)},xe=(fe,q)=>{{var v=y=>{var _=ye(),G=ge(_);Ke(G,()=>e(m),(_e,we)=>{we(_e,{})}),n(y,_)};u(fe,y=>{e(m)&&y(v)},q)}};u(me,fe=>{e(L)?fe(Ne):fe(xe,!1)})}n(he,$)},Ee=(he,$)=>{{var me=xe=>{var fe=ye(),q=ge(fe);{var v=_=>{var G=wn();n(_,G)},y=(_,G)=>{{var _e=we=>{var Ce=ye(),Me=ge(Ce);Ke(Me,()=>e(N),(He,Le)=>{Le(He,{})}),n(we,Ce)};u(_,we=>{e(N)&&we(_e)},G)}};u(q,_=>{e(L)?_(v):_(y,!1)})}n(xe,fe)},Ne=(xe,fe)=>{{var q=y=>{var _=ye(),G=ge(_);{var _e=Ce=>{var Me=yn();n(Ce,Me)},we=(Ce,Me)=>{{var He=Le=>{var Se=ye(),Pe=ge(Se);Ke(Pe,()=>e(S),(ze,Oe)=>{Oe(ze,{})}),n(Le,Se)};u(Ce,Le=>{e(S)&&Le(He)},Me)}};u(G,Ce=>{e(L)?Ce(_e):Ce(we,!1)})}n(y,_)},v=(y,_)=>{{var G=we=>{var Ce=ye(),Me=ge(Ce);{var He=Se=>{var Pe=kn();n(Se,Pe)},Le=(Se,Pe)=>{{var ze=Oe=>{var Be=ye(),We=ge(Be);Ke(We,()=>e(g),(je,Ve)=>{Ve(je,{})}),n(Oe,Be)};u(Se,Oe=>{e(g)&&Oe(ze)},Pe)}};u(Me,Se=>{e(L)?Se(He):Se(Le,!1)})}n(we,Ce)},_e=(we,Ce)=>{{var Me=Le=>{var Se=ye(),Pe=ge(Se);{var ze=Be=>{var We=xn();n(Be,We)},Oe=(Be,We)=>{{var je=Ve=>{var Ue=ye(),at=ge(Ue);Ke(at,()=>e(k),(rt,nt)=>{nt(rt,{})}),n(Ve,Ue)};u(Be,Ve=>{e(k)&&Ve(je)},We)}};u(Pe,Be=>{e(L)?Be(ze):Be(Oe,!1)})}n(Le,Se)},He=(Le,Se)=>{{var Pe=ze=>{var Oe=ye(),Be=ge(Oe);{var We=Ve=>{var Ue=Sn();n(Ve,Ue)},je=(Ve,Ue)=>{{var at=rt=>{var nt=ye(),vt=ge(nt);Ke(vt,()=>e(B),(Ie,qe)=>{qe(Ie,{})}),n(rt,nt)};u(Ve,rt=>{e(B)&&rt(at)},Ue)}};u(Be,Ve=>{e(L)?Ve(We):Ve(je,!1)})}n(ze,Oe)};u(Le,ze=>{e(R)==="error-generic"&&ze(Pe)},Se)}};u(we,Le=>{e(R)==="error-500"?Le(Me):Le(He,!1)},Ce)}};u(y,we=>{e(R)==="error-404"?we(G):we(_e,!1)},_)}};u(xe,y=>{e(R)==="detections"?y(q):y(v,!1)},fe)}};u(he,xe=>{e(R)==="settings"?xe(me):xe(Ne,!1)},$)}};u(z,he=>{e(R)==="system"?he(ae):he(Ee,!1)},U)}};u(M,z=>{e(R)==="about"?z(te):z(se,!1)},j)}};u(w,M=>{e(R)==="search"?M(l):M(P,!1)},O)}};u(be,w=>{e(R)==="species"?w(ke):w(oe,!1)},ie)}};u(X,be=>{e(R)==="analytics"?be(ue):be(re,!1)},ne)}};u(I,X=>{e(R)==="notifications"?X(ve):X(C,!1)},J)}};u(K,I=>{e(R)==="dashboard"?I(De):I(p,!1)})}n(f,E)},$$slots:{default:!0}}),Ze()}Vt(Tn,{target:document.getElementById("app")});export{Dt as A,Et as C,ce as c};
