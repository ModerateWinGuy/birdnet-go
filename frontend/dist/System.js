import{c as da}from"./index.js";import{p as oa,a as j,k as m,o as s,l as a,i as w,t as S,q as va,r as ra,B as c,h as u,j as ia,w as W,E as fa,g as i,e as na,C as ga,F as Ua,I as La,c as Ta,f as Ba,d as _a,b as ta,z as Ea,y as Fa}from"./vendor.js";var za=m('<div class="py-4"><div class="flex flex-col gap-2"><div class="skeleton h-4 w-full mb-2"></div> <div class="skeleton h-4 w-3/4 mb-2"></div> <div class="skeleton h-4 w-5/6"></div></div></div>'),Da=m('<div class="alert alert-error" role="alert"> </div>'),Ra=m('<div class="flex justify-between"><span class="text-base-content/70">CPU Temperature:</span> <span class="font-medium"> </span></div>'),qa=m('<div class="py-1"><div class="skeleton h-4 w-1/2"></div></div>'),Ha=m('<div class="text-error text-sm" role="alert"> </div>'),Xa=m('<div class="flex justify-between"><span class="text-base-content/70">System Model:</span> <span class="font-medium"> </span></div>'),Ga=m('<div class="flex justify-between"><span class="text-base-content/70">Time Zone:</span> <span class="font-medium"> </span></div>'),Ka=m('<div class="space-y-2" aria-labelledby="system-info-heading"><div class="flex justify-between"><span class="text-base-content/70">Operating System:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-base-content/70">Hostname:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-base-content/70">Uptime:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span class="text-base-content/70">CPU Count:</span> <span class="font-medium"> </span></div> <!> <!> <!> <!> <!></div>'),Va=m('<div><div class="card-body card-padding"><h2 class="card-title" id="system-info-heading"> </h2> <div class="divider"></div> <!> <!> <!></div></div>');function Oa(G,r){oa(r,!0);let _=j(r,"isLoading",3,!1),f=j(r,"error",3,null),g=j(r,"temperatureLoading",3,!1),h=j(r,"temperatureError",3,null),P=j(r,"className",3,"");function C(d){if(!d)return"N/A";const x=Math.floor(d/86400),I=Math.floor(d%86400/3600),n=Math.floor(d%3600/60),t=[];return x>0&&t.push(`${x}d`),I>0&&t.push(`${I}h`),n>0&&t.push(`${n}m`),t.join(" ")||"< 1m"}var T=Va(),N=a(T),K=a(N),B=a(K),D=s(K,4);{var V=d=>{var x=za();u(d,x)};w(D,d=>{_()&&d(V)})}var O=s(D,2);{var E=d=>{var x=Da(),I=a(x);S(()=>c(I,f())),u(d,x)};w(O,d=>{f()&&!_()&&d(E)})}var R=s(O,2);{var q=d=>{var x=Ka(),I=a(x),n=s(a(I),2),t=a(n),l=s(I,2),M=s(a(l),2),F=a(M),p=s(l,2),y=s(a(p),2),e=a(y),o=s(p,2),U=s(a(o),2),J=a(U),z=s(o,2);{var k=v=>{var b=Ra(),L=s(a(b),2),Z=a(L);S(la=>c(Z,la),[()=>r.temperatureInfo.celsius?r.temperatureInfo.celsius.toFixed(1)+"Â°C":"N/A"]),u(v,b)};w(z,v=>{r.temperatureInfo?.is_available&&!g()&&!h()&&v(k)})}var A=s(z,2);{var H=v=>{var b=qa();u(v,b)};w(A,v=>{g()&&v(H)})}var X=s(A,2);{var Y=v=>{var b=Ha(),L=a(b);S(()=>c(L,h())),u(v,b)};w(X,v=>{h()&&!g()&&v(Y)})}var Q=s(X,2);{var $=v=>{var b=Xa(),L=s(a(b),2),Z=a(L);S(()=>c(Z,r.systemInfo.system_model||"N/A")),u(v,b)};w(Q,v=>{r.systemInfo.system_model&&v($)})}var aa=s(Q,2);{var ea=v=>{var b=Ga(),L=s(a(b),2),Z=a(L);S(()=>c(Z,r.systemInfo.time_zone||"N/A")),u(v,b)};w(aa,v=>{r.systemInfo.time_zone&&v(ea)})}S(v=>{c(t,r.systemInfo.os_display||"N/A"),c(F,r.systemInfo.hostname||"N/A"),c(e,v),c(J,r.systemInfo.num_cpu||"N/A")},[()=>C(r.systemInfo.uptime_seconds)||"N/A"]),u(d,x)};w(R,d=>{!_()&&!f()&&d(q)})}S(d=>{ra(T,1,d),c(B,r.title)},[()=>va(da("card bg-base-100 shadow-sm",P()))]),u(G,T),ia()}var Za=m('<div class="py-4"><div class="flex flex-col gap-2"><div class="skeleton h-4 w-full mb-2"></div> <div class="skeleton h-4 w-4/5 mb-2"></div> <div class="skeleton h-4 w-3/4"></div></div></div>'),Ja=m('<div class="alert alert-error" role="alert"> </div>'),Qa=m('<div><div class="flex justify-between mb-1"><span class="font-medium"> </span> <span> </span></div> <div class="w-full bg-base-200 rounded-full h-2" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div></div></div> <div class="text-xs text-right mt-1"> </div></div>'),Wa=m('<div class="grid grid-cols-2 gap-2 text-sm"><div class="flex justify-between"><span class="text-base-content/70">Free:</span> <span> </span></div> <div class="flex justify-between"><span class="text-base-content/70">Available:</span> <span> </span></div></div>'),Ya=m('<div class="space-y-4"><!> <!></div>'),$a=m('<div class="text-center py-4 text-base-content/70"> </div>'),ae=m('<div><div class="card-body card-padding"><h2 class="card-title"> </h2> <div class="divider"></div> <!> <!> <!> <!></div></div>');function ma(G,r){oa(r,!0);let _=j(r,"isLoading",3,!1),f=j(r,"error",3,null),g=j(r,"showDetails",3,!1),h=j(r,"emptyMessage",3,"No data available"),P=j(r,"className",3,"");function C(n){if(!n)return"0 B";const t=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(n)/Math.log(1024));return Math.round(n/Math.pow(1024,l)*100)/100+" "+t[l]}function T(n){return n>90?"bg-error":n>70?"bg-warning":"bg-success"}var N=ae(),K=a(N),B=a(K),D=a(B),V=s(B,4);{var O=n=>{var t=Za();u(n,t)};w(V,n=>{_()&&n(O)})}var E=s(V,2);{var R=n=>{var t=Ja(),l=a(t);S(()=>c(l,f())),u(n,t)};w(E,n=>{f()&&!_()&&n(R)})}var q=s(E,2);{var d=n=>{var t=Ya(),l=a(t);fa(l,17,()=>r.items,Ua,(p,y)=>{var e=Qa(),o=a(e),U=a(o),J=a(U),z=s(U,2),k=a(z),A=s(o,2),H=a(A);let X;var Y=s(A,2),Q=a(Y);S(($,aa,ea,v,b,L)=>{c(J,i(y).mountpoint||i(y).label),c(k,`${$??""} / ${aa??""}`),W(A,"aria-valuenow",i(y).usagePercent),W(A,"aria-valuetext",`${ea??""}% used`),ra(H,1,`h-2 rounded-full ${v??""}`),X=ga(H,"",X,b),c(Q,`${L??""}% used`)},[()=>C(i(y).used),()=>C(i(y).total),()=>Math.round(i(y).usagePercent),()=>T(i(y).usagePercent),()=>({width:`${i(y).usagePercent??""}%`}),()=>Math.round(i(y).usagePercent)]),u(p,e)});var M=s(l,2);{var F=p=>{var y=Wa();const e=na(()=>r.items[0]);var o=a(y),U=s(a(o),2),J=a(U),z=s(o,2),k=s(a(z),2),A=a(k);S((H,X)=>{c(J,H),c(A,X)},[()=>C(i(e).total-i(e).used),()=>C(i(e).total-i(e).used)]),u(p,y)};w(M,p=>{g()&&r.items.length===1&&p(F)})}S(p=>W(t,"aria-labelledby",p),[()=>`${r.title.toLowerCase().replace(/\s+/g,"-")}-heading`]),u(n,t)};w(q,n=>{!_()&&!f()&&r.items.length>0&&n(d)})}var x=s(q,2);{var I=n=>{var t=$a(),l=a(t);S(()=>c(l,h())),u(n,t)};w(x,n=>{!_()&&!f()&&r.items.length===0&&n(I)})}S((n,t)=>{ra(N,1,n),W(B,"id",t),c(D,r.title)},[()=>va(da("card bg-base-100 shadow-sm",P())),()=>`${r.title.toLowerCase().replace(/\s+/g,"-")}-heading`]),u(G,N),ia()}function ee(G,r){r.onToggleShowAll&&r.onToggleShowAll()}var te=m('<div class="py-4"><div class="flex justify-center"><span class="loading loading-spinner loading-lg" aria-hidden="true"></span> <span class="sr-only">Loading process information...</span></div></div>'),re=m('<div class="alert alert-error" role="alert"> </div>'),se=m('<tr><td colspan="5" class="text-center py-6 text-base-content/70">No process information available</td></tr>'),ne=m('<tr class="hover:bg-base-200/50 transition-colors duration-150"><td><div class="flex items-start gap-2"><div class="p-1.5 bg-primary/10 rounded-md text-primary"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path></svg></div> <div><div class="font-medium"> </div> <div class="text-xs text-base-content/60"> </div></div></div></td><td><span> </span></td><td><div class="flex items-center gap-2"><div class="w-16 h-2 bg-base-200 rounded-full overflow-hidden" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div class="h-full rounded-full bg-primary"></div></div> <span class="text-sm"> </span></div></td><td><span class="text-sm font-medium"> </span></td><td><span class="text-sm"> </span></td></tr>'),oe=m('<div class="overflow-x-auto" aria-labelledby="process-info-heading"><table class="table table-zebra w-full"><thead><tr class="bg-base-200"><th scope="col">Process</th><th scope="col">Status</th><th scope="col">CPU</th><th scope="col">Memory</th><th scope="col">Uptime</th></tr></thead><tbody><!></tbody></table></div>'),ie=m('<div><div class="card-body card-padding"><div class="flex justify-between items-center mb-2"><h2 class="card-title" id="process-info-heading"> </h2> <div class="flex items-center gap-2 bg-base-200 px-3 py-1.5 rounded-lg shadow-sm"><span class="text-sm font-medium">Show all processes</span> <input type="checkbox" class="toggle toggle-sm toggle-primary" aria-label="Toggle to show all system processes"/></div></div> <div class="divider mt-0"></div> <!> <!> <!></div></div>');function le(G,r){oa(r,!0);let _=j(r,"showAllProcesses",3,!1),f=j(r,"isLoading",3,!1),g=j(r,"error",3,null),h=j(r,"className",3,"");function P(t){if(!t)return"0 B";const l=["B","KB","MB","GB","TB"],M=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,M)*100)/100+" "+l[M]}function C(t){if(!t)return"N/A";const l=Math.floor(t/86400),M=Math.floor(t%86400/3600),F=Math.floor(t%3600/60),p=[];return l>0&&p.push(`${l}d`),M>0&&p.push(`${M}h`),F>0&&p.push(`${F}m`),p.join(" ")||"< 1m"}function T(t){switch(t){case"running":return"badge-success";case"sleeping":case"sleep":return"badge-warning";case"zombie":return"badge-error";case"idle":return"badge-info";default:return"badge-secondary"}}var N=ie(),K=a(N),B=a(K),D=a(B),V=a(D),O=s(D,2),E=s(a(O),2);E.__change=[ee,r];var R=s(B,4);{var q=t=>{var l=te();u(t,l)};w(R,t=>{f()&&t(q)})}var d=s(R,2);{var x=t=>{var l=re(),M=a(l);S(()=>c(M,g())),u(t,l)};w(d,t=>{g()&&!f()&&t(x)})}var I=s(d,2);{var n=t=>{var l=oe(),M=a(l),F=s(a(M)),p=a(F);{var y=o=>{var U=se();u(o,U)},e=o=>{var U=Ta(),J=Ba(U);fa(J,17,()=>r.processes,z=>z.pid,(z,k)=>{var A=ne(),H=a(A),X=a(H),Y=s(a(X),2),Q=a(Y),$=a(Q),aa=s(Q,2),ea=a(aa),v=s(H),b=a(v),L=a(b),Z=s(v),la=a(Z),sa=a(la),ha=a(sa);let ca;var pa=s(sa,2),ya=a(pa),ua=s(Z),ba=a(ua),wa=a(ba),xa=s(ua),Ma=a(xa),ka=a(Ma);S((Sa,Pa,Ia,ja,Aa,Ca,Na)=>{c($,i(k).name==="main"?"BirdNET-Go":i(k).name),c(ea,`PID: ${i(k).pid??""}`),ra(b,1,`badge badge-sm ${Sa??""}`),c(L,i(k).status),W(sa,"aria-valuenow",Pa),W(sa,"aria-valuetext",`${Ia??""}% CPU usage`),ca=ga(ha,"",ca,ja),c(ya,`${Aa??""}%`),c(wa,Ca),c(ka,Na)},[()=>T(i(k).status),()=>Math.min(Math.round(i(k).cpu),100),()=>Math.round(i(k).cpu),()=>({width:`${Math.min(Math.round(i(k).cpu),100)}%`}),()=>Math.round(i(k).cpu),()=>P(i(k).memory),()=>C(i(k).uptime)]),u(z,A)}),u(o,U)};w(p,o=>{r.processes.length===0?o(y):o(e,!1)})}u(t,l)};w(I,t=>{!f()&&!g()&&t(n)})}S(t=>{ra(N,1,t),c(V,r.title),La(E,_())},[()=>va(da("card bg-base-100 shadow-sm",h()))]),u(G,N),ia()}_a(["change"]);var de=m('<span class="loading loading-spinner loading-sm mr-2" aria-hidden="true"></span>'),ve=Fa('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 100-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path></svg>'),ce=m('<div class="col-span-12 space-y-4" role="region" aria-label="System Dashboard"><div class="gap-6 system-cards-grid svelte-kyuwcq"><!> <!> <!></div> <!> <div class="flex justify-center mt-6"><button class="btn btn-primary" aria-label="Refresh system data"><!> Refresh Data</button></div></div>');function fe(G,r){oa(r,!0);let _=ta({loading:!0,error:null,data:{}}),f=ta({loading:!0,error:null,data:[]}),g=ta({loading:!0,error:null,data:{}}),h=ta({loading:!0,error:null,data:{is_available:!1}}),P=ta({loading:!0,error:null,data:[]}),C=!1,T=na(()=>_.loading||f.loading||g.loading||P.loading||h.loading),N=na(()=>f.data.map(e=>({label:e.mountpoint,used:e.used,total:e.total,usagePercent:e.usage_percent,mountpoint:e.mountpoint}))),K=na(()=>g.data.total?[{label:"RAM Usage",used:g.data.used,total:g.data.total,usagePercent:g.data.usedPercent}]:[]);async function B(){_.loading=!0,_.error=null;try{const e=await fetch("/api/v2/system/info",{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content||""}});if(!e.ok)throw new Error(`Server responded with ${e.status}`);_.data=await e.json()}catch(e){_.error=`Failed to load system information: ${e instanceof Error?e.message:"Unknown error"}`}finally{_.loading=!1}}async function D(){f.loading=!0,f.error=null;try{const e=await fetch("/api/v2/system/disks",{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content||""}});if(!e.ok)throw new Error(`Server responded with ${e.status}`);f.data=await e.json()}catch(e){f.error=`Failed to load disk usage: ${e instanceof Error?e.message:"Unknown error"}`,f.data=[]}finally{f.loading=!1}}async function V(){g.loading=!0,g.error=null;try{const e=await fetch("/api/v2/system/resources",{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content||""}});if(!e.ok)throw new Error(`Server responded with ${e.status}`);const o=await e.json();g.data={total:o.memory_total,used:o.memory_used,free:o.memory_free,available:o.memory_free,usedPercent:o.memory_usage_percent}}catch(e){g.error=`Failed to load memory usage: ${e instanceof Error?e.message:"Unknown error"}`}finally{g.loading=!1}}async function O(){h.loading=!0,h.error=null;try{const e=await fetch("/api/v2/system/temperature/cpu",{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content||""}});if(!e.ok){if(e.status===404){h.data={is_available:!1};return}throw new Error(`Server responded with ${e.status}`)}h.data=await e.json()}catch(e){h.error=`Failed to load temperature: ${e instanceof Error?e.message:"Unknown error"}`,h.data={is_available:!1}}finally{h.loading=!1}}async function E(){P.loading=!0,P.error=null;try{const o=await fetch(C?"/api/v2/system/processes?all=true":"/api/v2/system/processes",{headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content||""}});if(!o.ok)throw new Error(`Server responded with ${o.status}`);P.data=await o.json()}catch(e){P.error=`Failed to load process information: ${e instanceof Error?e.message:"Unknown error"}`,P.data=[]}finally{P.loading=!1}}async function R(){await Promise.all([B(),D(),V(),O(),E()])}Ea(()=>{R()});var q=ce(),d=a(q),x=a(d);Oa(x,{title:"System Information",get systemInfo(){return _.data},get temperatureInfo(){return h.data},get isLoading(){return _.loading},get error(){return _.error},get temperatureLoading(){return h.loading},get temperatureError(){return h.error}});var I=s(x,2);ma(I,{title:"Disk Usage",get items(){return i(N)},get isLoading(){return f.loading},get error(){return f.error},emptyMessage:"No disk information available"});var n=s(I,2);ma(n,{title:"Memory Usage",get items(){return i(K)},get isLoading(){return g.loading},get error(){return g.error},showDetails:!0});var t=s(d,2);le(t,{title:"Process Information",get processes(){return P.data},showAllProcesses:C,get isLoading(){return P.loading},get error(){return P.error},onToggleShowAll:E,className:"mt-6"});var l=s(t,2),M=a(l);M.__click=R;var F=a(M);{var p=e=>{var o=de();u(e,o)},y=e=>{var o=ve();u(e,o)};w(F,e=>{i(T)?e(p):e(y,!1)})}S(()=>M.disabled=i(T)),u(G,q),ia()}_a(["click"]);export{fe as default};
